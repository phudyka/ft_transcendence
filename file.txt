===== docker-compose.yml =====
services:db:build:context:.dockerfile:Dockerfile-postgresqlvolumes:-postgres_data:/var/lib/postgresql/dataports:-"5432:5432"environment:-POSTGRES_DB=db-POSTGRES_USER=fabriciopa-POSTGRES_PASSWORD=5472adminer:build:context:.dockerfile:Dockerfile-adminerports:-"8080:8080"depends_on:-dbweb:build:context:.dockerfile:Dockerfile-djangocommand:pythonmanage.pyrunserver0.0.0.0:8000volumes:-./ft_trans:/codeports:-"8000:8000"depends_on:-dbenvironment:-DATABASE_URL=postgres://fabriciopa:5472@db/dbchat:build:context:.dockerfile:Dockerfile-chatports:-"3000:3000"depends_on:-webgame:build:context:.dockerfile:./ft_trans/pong/templates/js/game/Dockerfileports:-"4000:4000"volumes:-./ft_trans/pong/templates/js/game:/usr/src/appdepends_on:-webvolumes:postgres_data:
===== init-database.sh =====
#!/bin/bashset-e#FonctionpourexécuterdescommandesSQLpsql_execute(){psql-vON_ERROR_STOP=1--username"$POSTGRES_USER"--dbname"$POSTGRES_DB"-c"$1"}#Vérifiersilabasededonnéesexistedéjàifpsql_execute"\l"|grep-q"$POSTGRES_DB";thenecho"Labasededonnées$POSTGRES_DBexistedéjà.Utilisationdelabaseexistante."elseecho"Labasededonnées$POSTGRES_DBn'existepas.Créationdelabasededonnées..."#Créerlabasededonnéespsql_execute"CREATEDATABASE$POSTGRES_DB;"#Seconnecteràlanouvellebasededonnéespsql_execute"\c$POSTGRES_DB"#ExécuterlescriptSQLpourcréerlestablespsql-vON_ERROR_STOP=1--username"$POSTGRES_USER"--dbname"$POSTGRES_DB"-f/docker-entrypoint-initdb.d/init-database.sqlecho"Basededonnées$POSTGRES_DBcrééeetinitialiséeavecsuccès."fi
===== init-database.sql =====
--InitialisationdelabasededonnéespourleprojetPong--SuppressiondestablesexistantessiellesexistentDROPTABLEIFEXISTSusersCASCADE;DROPTABLEIFEXISTSfriendsCASCADE;DROPTABLEIFEXISTSmatchesCASCADE;DROPTABLEIFEXISTStournamentsCASCADE;DROPTABLEIFEXISTStournament_participantsCASCADE;DROPTABLEIFEXISTSprivate_messagesCASCADE;DROPTABLEIFEXISTSuser_settingsCASCADE;DROPTABLEIFEXISTSusersCASCADE;DROPTABLEIFEXISTSauth_userCASCADE;DROPTABLEIFEXISTSdjango_migrationsCASCADE;
===== Dockerfile-adminer =====
FROMadminer:latest#Setthedefaulttheme(optional)ENVADMINER_DESIGNdarcula#Youcanaddcustomizationshereifneeded#Forexample,toaddplugins:#ADDhttps://raw.githubusercontent.com/vrana/adminer/master/plugins/plugin.php/var/www/html/plugins/#ADDhttps://raw.githubusercontent.com/vrana/adminer/master/plugins/login-servers.php/var/www/html/plugins/EXPOSE8080
===== Dockerfile-django =====
#UseanofficialPythonruntimeasaparentimageFROMpython:3.10#SetenvironmentvariablesENVPYTHONDONTWRITEBYTECODE1ENVPYTHONUNBUFFERED1#SetworkdirectoryWORKDIR/code#InstalldependenciesCOPYrequirements.txt/code/RUNpipinstall--upgradepipRUNpipinstall-rrequirements.txt#CopyprojectCOPY./code/#Copyentrypointscript#COPYentrypoint.sh/code/entrypoint.sh#RUNchmod+x/code/entrypoint.sh#ExposetheporttheapprunsonEXPOSE8000#ENTRYPOINT["/code/entrypoint.sh"]#RuntheapplicationCMD["python","manage.py","runserver","0.0.0.0:8000"]
===== Dockerfile-postgresql =====
FROMpostgres:16#Copiezlescriptd'initialisationCOPYinit-database.sh/docker-entrypoint-initdb.d/COPYinit-database.sql/docker-entrypoint-initdb.d/#Définissezlesvariablesd'environnementENVPOSTGRES_DB=dbENVPOSTGRES_USER=fabriciopaENVPOSTGRES_PASSWORD=5472#ExposezleportPostgreSQLEXPOSE5432
===== ./ft_trans/pong/models.py =====
fromdjango.dbimportmodelsfromdjango.confimportsettingsfromdjango.contrib.auth.modelsimportAbstractBaseUser,PermissionsMixin,BaseUserManagerfromdjango.contrib.auth.hashersimportmake_password,check_passwordfromdjango.contrib.auth.validatorsimportUnicodeUsernameValidatorclassCustomUserManager(BaseUserManager):defcreate_user(self,username,password=None,**extra_fields):ifnotusername:raiseValueError('Lenomd’utilisateurestobligatoire')user=self.model(username=username,**extra_fields)user.set_password(password)user.save(using=self._db)returnuserdefcreate_superuser(self,username,password=None,**extra_fields):extra_fields.setdefault('is_superuser',True)returnself.create_user(username,password,**extra_fields)classCustomUser(AbstractBaseUser,PermissionsMixin):username=models.CharField(max_length=50,unique=True,validators=[UnicodeUsernameValidator()],verbose_name='nomd’utilisateur')email=models.CharField(max_length=100,verbose_name='adresseemail')display_name=models.CharField(max_length=50,unique=True)avatar_url=models.CharField(max_length=255,default='default_avatar.png',null=True)created_at=models.DateTimeField(auto_now_add=True)is_online=models.BooleanField(default=False)wins=models.IntegerField(default=0)losses=models.IntegerField(default=0)is_active=models.BooleanField(default=True)is_staff=models.BooleanField(default=False)objects=CustomUserManager()USERNAME_FIELD='username'REQUIRED_FIELDS=['email']classMeta:db_table='users'def__str__(self):returnself.usernamedefset_password(self,raw_password):self.password=make_password(raw_password)#Utilisezself.passwordaulieudeself.password_hashdefcheck_password(self,raw_password):returncheck_password(raw_password,self.password)#Utilisezself.passwordaulieudeself.password_hashclassUserToken(models.Model):user=models.ForeignKey(settings.AUTH_USER_MODEL,on_delete=models.CASCADE,related_name='tokens')token=models.TextField(unique=True)created_at=models.DateTimeField(auto_now_add=True)expiry_date=models.DateTimeField()def__str__(self):returnf"{self.user.username}-{self.token[:20]}..."
===== ./ft_trans/pong/apps.py =====
fromdjango.appsimportAppConfigclassPongConfig(AppConfig):default_auto_field='django.db.models.BigAutoField'name='pong'
===== ./ft_trans/pong/admin.py =====
fromdjango.contribimportadminfrom.modelsimportCustomUseradmin.site.register(CustomUser)
===== ./ft_trans/pong/templates/index.html =====
{%loadstatic%}<!DOCTYPEhtml><htmllang="en"><head><linkrel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"><linkrel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"><style>@importurl('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');</style><metacharset="UTF-8"><metaname="viewport"content="width=device-width,initial-scale=1.0"><title>ft_transcendence</title><linkhref="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"rel="stylesheet"integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"crossorigin="anonymous"><linkrel="stylesheet"href="{%static'css/styles.css'%}"><linkrel="stylesheet"href="{%static'css/avatar.css'%}"><linkrel="stylesheet"href="{%static'css/caroussel.css'%}"></head><body><divid="ft_transcendence"></div><script>varstaticUrl="{%static''%}";</script><scripttype="module"src="{%static'js/app.js'%}"></script><scriptsrc="https://cdn.jsdelivr.net/npm/chart.js"></script><scriptsrc="{%static'js/utils/unmask.js'%}"></script><scripttype="module"src="{%static'js/views/login.js'%}"></script><scripttype="module"src="{%static'js/views/register.js'%}"></script><scripttype="module"src="{%static'js/views/settings.js'%}"></script><scripttype="module"src="{%static'js/views/dashboard.js'%}"></script><scripttype="module"src="{%static'js/app.js'%}"></script><scripttype="module"src="{%static'js/views/profile.js'%}"></script><scriptsrc="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script><scriptsrc="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script><scriptsrc="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script><scriptsrc="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script></body></html>
===== ./ft_trans/pong/templates/js/utils/server.js =====
constexpress=require('express');consthttp=require('http');constsocketIo=require('socket.io');constcors=require('cors');constuserConnections=newMap();constapp=express();constserver=http.createServer(app);constio=socketIo(server,{cors:{origin:"*",methods:["GET","POST"],credentials:true}});//FonctionpourformaterladatefunctionformatDate(date){constday=date.getDate().toString().padStart(2,'0');constmonth=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][date.getMonth()];constyear=date.getFullYear();consthours=date.getHours().toString().padStart(2,'0');constminutes=date.getMinutes().toString().padStart(2,'0');constseconds=date.getSeconds().toString().padStart(2,'0');return`{[${day}/${month}/${year}${hours}:${minutes}:${seconds}]}`;}//UtiliserlemiddlewareCORSapp.use(cors());app.get('/',(req,res)=>{res.send('Socket.ioserverisrunning');});constusers=newMap();io.on('connection',(socket)=>{console.log('Unutilisateurs\'estconnecté:',socket.id);socket.on('register',(username)=>{if(username&&!users.has(username)){socket.username=username;users.set(username,socket.id);console.log('Utilisateurenregistré:',username);}elseif(users.has(username)){console.log('Utilisateurdéjàenregistré:',username);}else{console.error('Tentatived\'enregistrementavecunnomd\'utilisateurinvalide');}});socket.on('chatmessage',(msg)=>{console.log(`${formatDate(newDate())}Messagereçude${msg.name}:${msg.message}`);io.emit('chatmessage',msg);//Émetàtouslesclients,ycomprisl'expéditeur});socket.on('privatemessage',({to,message})=>{constrecipientSocket=users.get(to);if(recipientSocket){console.log(`${formatDate(newDate())}Messageprivéde${socket.id}à${to}:${message}`);io.to(recipientSocket).emit('privatemessage',{from:socket.id,message:message});}});socket.on('disconnect',()=>{console.log(`${formatDate(newDate())}Unutilisateurs'estdéconnecté:${socket.id}`);users.forEach((value,key)=>{if(value===socket.id){users.delete(key);}});userConnections.forEach((value,key)=>{if(value.socketId===socket.id){userConnections.delete(key);}});});});server.listen(3000,()=>{console.log(`${formatDate(newDate())}Serveurenécoutesurleport3000`);});
===== ./ft_trans/pong/templates/js/utils/token.js =====
import{navigateTo}from'../app.js';//DéclarezunevariableglobalepourstockerlaréférenceausocketletglobalSocket;//FonctionpourdéfinirlesocketglobalexportfunctionsetGlobalSocket(socket){globalSocket=socket;}functionrefreshToken(){returnfetch('http://localhost:8000/api/token/refresh/',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({refresh:localStorage.getItem('refreshToken')}),}).then(response=>response.json()).then(data=>{if(data.access){localStorage.setItem('accessToken',data.access);returntrue;}else{returnfalse;}}).catch(()=>false);}exportasyncfunctiongetCsrfToken(){constresponse=awaitfetch('/api/set-csrf-token/',{method:'GET',credentials:'include',});if(response.ok){constdata=awaitresponse.json();returndata.csrfToken;}thrownewError('FailedtogetCSRFtoken');}exportfunctiongenerateToken(){returnfetch('http://localhost:8000/api/token/',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({username:'admin',password:'admin',}),}).then(response=>response.json()).then(data=>{if(data.access&&data.refresh){localStorage.setItem('accessToken',data.access);localStorage.setItem('refreshToken',data.refresh);returntrue;}else{returnfalse;}}).catch(()=>false);}exportfunctionlogout(){//Déconnexiondusocketsiilexisteif(globalSocket&&globalSocket.connected){globalSocket.disconnect();console.log('Utilisateurdéconnectédusocket');}//SuppressiondesdonnéeslocaleslocalStorage.removeItem('accessToken');localStorage.removeItem('refreshToken');localStorage.removeItem('username');localStorage.removeItem('display_name');localStorage.removeItem('avatar_url');//RedirectionverslapagedeconnexionnavigateTo('/login');}exportasyncfunctionrefreshAccessToken(){constrefreshToken=localStorage.getItem('refreshToken');if(!refreshToken){console.log('Aucunrefreshtokendisponible.');logout();returnfalse;}try{constresponse=awaitfetch('/api/token/refresh/',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({refresh:refreshToken}),});constdata=awaitresponse.json();if(data.access){localStorage.setItem('accessToken',data.access);returntrue;}else{logout();returnfalse;}}catch(error){console.error('Erreurlorsdurafraîchissementdutoken :',error);logout();returnfalse;}}//Appelerrégulièrementpourrafraîchirletoken(parexemple,toutesles50minutes)setInterval(refreshAccessToken,50*60*1000);
===== ./ft_trans/pong/templates/js/utils/unmask.js =====
window.changeType=function(x,type){if(x.type===type){returnx;}try{return(x.type=type);//Attemptdirecttypechange}catch(e){varhtml=$("<div>").append(x.clone()).html();varregex=/type=(\")?([^\"\s]+)(\")?/;vartmp=$(html.match(regex)==null?html.replace(">",'type="'+type+'">')://Replaceentiretagifnotypeattributehtml.replace(regex,'type="'+type+'"'));//Replaceexistingtypeattributetmp.data('type',x.data('type'));varevents=x.data('events');varcb=function(events){returnfunction(){for(variinevents){vary=events[i];for(varjiny){tmp.bind(i,y[j].handler);}}};}(events);x.replaceWith(tmp);setTimeout(cb,10);returntmp;}}$(document).ready(function(){$('.unmask').on('click',function(){if($(this).prev('input').attr('type')==='password'){window.changeType($(this).prev('input'),'text');}else{window.changeType($(this).prev('input'),'password');}returnfalse;});});
===== ./ft_trans/pong/templates/js/game/index.html =====
<!DOCTYPEhtml><htmllang="en"><head><metacharset="utf-8"><title>ft_transcendence</title><linkrel="stylesheet"href="style.css"></head><body><buttonid="start-game-button"class="start-game-button">DémarrerleJeu</button><divid="menu"class="menuhidden"><buttonclass="menu-buttonhidden"id="solo-ia">Solo</button><buttonclass="menu-buttonhidden"id="multi-button">ModeMultijoueur</button></div><divid="multi"class="multihidden"><buttonclass="menu-button"id="multi-2-local">2JoueursenLocal</button><buttonclass="menu-button"id="multi-2-online">2JoueursenLigne</button><buttonclass="menu-button"id="multi-four">4JoueursenLigne</button><buttonclass="menu-button"id="multi-tournament">ParticiperàunTournoi</button><buttonclass="menu-button"id="multi-back-button">RetourauMenu</button></div><divid="tournament"class="tournamenthidden"><ulid="tournament-list"></ul><buttonclass="menu-button"id="create-tournament">CréerunNouveauTournoi</button><buttonclass="menu-button"id="tournament-back-button">Retour</button></div><divid="tournament-details"class="hidden"><divclass="colonne"><spanid="player-1"></span><divclass="ligne"><spanid="player-2"></span></div><spanid="player-3"></span><divclass="ligne"><spanid="player-4"></span></div></div><divclass="colonne"><spanid="Gagnant-1"></span><divclass="ligne"><spanid="Gagnant-2"></span></div></div><divclass="colonne"><spanid="Gagnant-Finale"></span></div><divid="match-info"class="hidden"></div><buttonclass="button-tournament"id="quit-tournament">QuitterleTournoi</button></div><divid="space"class="hidden"><h1>PressspaceforLaunchthegame</h1></div><divid="waiting"class="waitinghidden"><p>Enattented'unautrejoueur...</p><divid="spinner"></div></div><divid="score"class="hidden"><divid="scoreLeft">0</div><divid="scoreTitle">SCORE</div><divid="scoreRight">0</div></div><divid="game-over"class="game-overhidden"><divid="winner-message"></div><buttonclass="menu-button"id="back-to-menu-button">RetourauMenu</button></div><divid="credits"><h1>CREDITS</h1></div><script>document.addEventListener('DOMContentLoaded',()=>{conststartButton=document.getElementById('start-game-button');constmenu=document.getElementById('menu');constsoloIaButton=document.getElementById('solo-ia');constmultiButton=document.getElementById('multi-button');constmultiMenu=document.getElementById('multi');consttournament=document.getElementById('tournament');consttournamentDetails=document.getElementById('tournament-details');constwaiting=document.getElementById('waiting');//AfficherleboutonStartGame//startButton.classList.add('hidden');tournamentDetails.classList.add('hidden');tournamentDetails.classList.remove('flex');/*document.getElementById('score').classList.remove('score-container');*///Lorsqu'oncliquesurStartGame,lemenuprincipalapparaît/*startButton.addEventListener('click',()=>{menu.classList.remove('hidden');startButton.classList.add('hidden');soloIaButton.classList.remove('hidden');multiButton.classList.remove('hidden');});*///GestionduboutonSolovsIAsoloIaButton.addEventListener('click',()=>{menu.classList.add('hidden');});//GestionduboutonMultijoueurmultiButton.addEventListener('click',()=>{menu.classList.add('hidden');multiMenu.classList.remove('hidden');});//GestionduboutonRetourdepuislemenuMultijoueurdocument.getElementById('multi-back-button').addEventListener('click',()=>{multiMenu.classList.add('hidden');menu.classList.remove('hidden');});//GestionduboutonTournoisdocument.getElementById('multi-tournament').addEventListener('click',()=>{multiMenu.classList.add('hidden');tournament.classList.remove('hidden');});//GestionduboutonRetourdepuislemenuTournoisdocument.getElementById('tournament-back-button').addEventListener('click',()=>{tournament.classList.add('hidden');multiMenu.classList.remove('hidden');});//GestionduboutonCréeruntournoidocument.getElementById('create-tournament').addEventListener('click',()=>{tournament.classList.add('hidden');tournamentDetails.classList.remove('hidden');tournamentDetails.classList.add('flex');});document.getElementById('quit-tournament').addEventListener('click',()=>{tournament.classList.remove('hidden');tournamentDetails.classList.add('hidden');tournamentDetails.classList.remove('flex');});//Gestiondumodemultijoueurlocaldocument.getElementById('multi-2-local').addEventListener('click',()=>{multiMenu.classList.add('hidden');});//Gestiondumodemultijoueurenlignedocument.getElementById('multi-2-online').addEventListener('click',()=>{multiMenu.classList.add('hidden');waiting.classList.remove('hidden');});//Gestiondumode4joueursenlignedocument.getElementById('multi-four').addEventListener('click',()=>{multiMenu.classList.add('hidden');waiting.classList.remove('hidden');});});</script><scriptsrc="./node_modules/socket.io/client-dist/socket.io.js"></script><scripttype="module"src="/main.mjs"></script></body></html>
===== ./ft_trans/pong/templates/js/views/profile.js =====
import{navigateTo}from'../app.js';import{logout}from'../utils/token.js';exportfunctionprofile(friendName){//Simulonsdesdonnées(àremplacerpardesdonnéesréellesdelabasededonnées)conststats={wins:120,losses:80,totalGames:200,winRatio:(120/200*100).toFixed(2),avgScore:7.5,totalPlayTime:'50h30m',highestAILevel:8,recentMatches:[{opponent:'Alice',result:'Win',date:'2024-03-15'},{opponent:'Bob',result:'Loss',date:'2024-03-14'},{opponent:'AILevel7',result:'Win',date:'2024-03-13'},{opponent:'Charlie',result:'Win',date:'2024-03-12'},{opponent:'AILevel6',result:'Win',date:'2024-03-11'},]};constplayer_name=localStorage.getItem('player_name');document.getElementById('ft_transcendence').innerHTML=`<divclass="dashboard-container"><ulclass="navjustify-content-betweenalign-items-center"><aclass="navbar-brand"href="#"><imgsrc="${staticUrl}content/logo2.png"id="pongonlineLink"alt="Logo"width="30"height="30"></a><liclass="nav-item"id="DisplayName"><aclass="nav-linkdisabled">${player_name}</a></li><liclass="nav-item"><aclass="nav-link"href="#"id="logoutLink">Logout</a></li></ul><h3id="header-dashboard"class="text-center">${friendName}'sProfile</h3><divclass="text-center"id="profile-picture"><imgsrc="https://i.ibb.co/DVfTxB2/avatar5.png"class="img-thumbnailrounded-circled-flexjustify-content-center"alt="ProfilePicture"></div><buttontype="button"id="friendButton"class="btn-dark">AddFriend</button><divclass="rowmt-4"><divclass="col-md-6"><divclass="card"><divclass="card-body"><h5class="card-title">PlayerStatistics</h5><pclass="card-text">Wins:${stats.wins}<br>Losses:${stats.losses}<br>WinRatio:${stats.winRatio}%<br>TotalGames:${stats.totalGames}<br>AverageScore:${stats.avgScore}<br>TotalPlayTime:${stats.totalPlayTime}<br>HighestAILevelBeaten:${stats.highestAILevel}</p></div></div></div><divclass="col-md-6"><divclass="card"><divclass="card-body"><h5class="card-title">Win/LossRatio</h5><divid="chartContainer"style="height:200px;width:100%;"><canvasid="winLossChart"></canvas></div></div></div></div></div><divclass="cardmt-4"style="margin-bottom:3%;"><divclass="card-body"><h5class="card-title">RecentMatches</h5><ulclass="list-group">${stats.recentMatches.map(match=>`<liclass="list-group-item">${match.date}:${match.result}vs${match.opponent}</li>`).join('')}</ul></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer></div>`;attachEventHandlers2(navigateTo,friendName);createWinLossChart(stats.wins,stats.losses);}functionattachEventHandlers2(navigateTo,friendName){constDisplayName=document.getElementById('DisplayName');constlogoutLink=document.getElementById('logoutLink');logoutLink.addEventListener('click',()=>{event.preventDefault();logout();});document.getElementById('pongonlineLink').addEventListener('click',function(event){event.preventDefault();navigateTo('/dashboard');});//Friendbuttonlogic(asbefore)letisFriend=false;letrequestSent=false;constfriendButton=document.getElementById('friendButton');functionupdateFriendButton(){if(isFriend){friendButton.innerText='AlreadyFriends';friendButton.classList.add('btn-dark','disabled');}elseif(requestSent){friendButton.innerText='RequestSent';friendButton.classList.add('btn-dark','disabled');}else{friendButton.innerText='AddFriend';friendButton.classList.remove('disabled');}}friendButton.addEventListener('click',()=>{if(isFriend){isFriend=false;}elseif(requestSent){requestSent=false;}else{requestSent=true;}updateFriendButton();});DisplayName.addEventListener('click',()=>navigateTo('/dashboard'));updateFriendButton();}functioncreateWinLossChart(wins,losses){constctx=document.getElementById('winLossChart').getContext('2d');newChart(ctx,{type:'pie',data:{labels:['Wins','Losses'],datasets:[{data:[wins,losses],backgroundColor:['#4CAF50','#F44336']}]},options:{responsive:true,maintainAspectRatio:false}});}
===== ./ft_trans/pong/templates/js/views/register.js =====
import{navigateTo}from'../app.js';import{getCsrfToken}from'../utils/token.js';exportfunctionregister(){document.getElementById('ft_transcendence').innerHTML=`<ulclass="navnavbar-expand-lgjustify-content-center"></ul><h1>Register</h1><liclass="breadcrumb-itemactive"id="arrowbackregister">Back</li><divclass="containerlogin-container"><formid="registerForm"><p><labelfor="username"style="margin-top:3%;">username</label><inputtype="text"value=""placeholder="EnterUsername"id="username"required></p><p><labelfor="email">Email</label><inputtype="email"value=""placeholder="EnterEmail"id="email"required></p><p><labelfor="password">password</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="EnterPassword"id="password"class="password"required><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><p><p><labelfor="confirmPassword">confirmpassword</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="ConfirmPassword"id="confirmPassword"class="password"><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><labelfor="email">chooseavatar</label><divclass="choose-avatar-container"><aclass="carousel-control-prev"role="button"data-slide="prev"><spanclass="carousel-control-prev-icon"id="carousel-control-prev-icon"aria-hidden="true"></span><spanclass="sr-only">Previous</span></a><divclass="choose-avatar"><divid="carouselExampleControls"class="carouselslide"data-ride="carousel"data-interval="false"><divclass="carousel-inner"><divclass="carousel-itemactive"><imgclass="d-blockavatar-image"src="https://i.ibb.co/C2WLdyY/avatar1.png"alt="Firstslide"></div><divclass="carousel-item"><imgclass="d-blockavatar-image"src="https://i.ibb.co/0t3JTMz/avatar2.png"alt="Secondslide"></div><divclass="carousel-item"><imgclass="d-blockavatar-image"src="https://i.ibb.co/K08BjJx/avatar3.png"alt="Thirdslide"></div><divclass="carousel-item"><imgclass="d-blockavatar-image"src="https://i.ibb.co/6XW1X2L/avatar4.png"alt="Fourthslide"></div><divclass="carousel-item"><imgclass="d-blockavatar-image"src="https://i.ibb.co/DVfTxB2/avatar5.png"alt="Fithslide"></div><divclass="carousel-item"><imgclass="d-blockavatar-image"src="https://i.ibb.co/Bzvqgg3/avatar6.png"alt="Sixthslide"></div><divclass="carousel-item"><imgclass="d-blockavatar-image"src="https://i.ibb.co/FDg3t8m/avatar7.png"alt="Seventhslide"></div></div></div></div><aclass="carousel-control-next"role="button"data-slide="next"><spanclass="carousel-control-next-icon"id="carousel-control-next-icon"aria-hidden="true"></span><spanclass="sr-only">Next</span></a></div></p><buttonid="registerbutton"type="submit"class="btnbtn-primarybtn-block">Register</button><buttonid="registerbutton42"type="button"class="btnbtn-primarybtn-block">Registerwith42</button></form></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;setupRegisterEvents(navigateTo);}functionsetupRegisterEvents(navigateTo){document.addEventListener('click',function(event){if(event.target.classList.contains('unmask')||event.target.closest('.unmask')){constbutton=event.target.closest('.unmask');//Targettheentirebuttonconstinput=button.previousElementSibling;if(input.type==='password'){input.type='text';button.querySelector('i').classList.remove('fa-lock');button.querySelector('i').classList.add('fa-lock-open');}else{input.type='password';button.querySelector('i').classList.remove('fa-lock-open');button.querySelector('i').classList.add('fa-lock');}}});document.getElementById('registerForm').addEventListener('submit',asyncfunction(event){event.preventDefault();constusername=document.getElementById('username').value;constemail=document.getElementById('email').value;constpassword=document.getElementById('password').value;constconfirmPassword=document.getElementById('confirmPassword').value;if(password!==confirmPassword){alert('Passwordsdonotmatch.Pleasetryagain.');return;}constselectedAvatar=document.querySelector('.carousel-item.activeimg').src;console.log('Registeringuser:',username,email,password,selectedAvatar);try{constcsrfToken=awaitgetCsrfToken();console.log('CSRFtoken:',csrfToken);constresponse=awaitfetch('/api/register/',{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken,},body:JSON.stringify({username:username,email:email,password:password,avatar_url:selectedAvatar}),credentials:'include',});constcontentType=response.headers.get("content-type");if(contentType&&contentType.indexOf("application/json")!==-1){constdata=awaitresponse.json();if(data.success){localStorage.setItem('accessToken',data.access);localStorage.setItem('refreshToken',data.refresh);localStorage.setItem('registrationSuccess','Accountcreatedsuccessfully.Pleaselogin.');navigateTo('/login');}else{alert('Errorduringregistration:'+data.error);}}else{console.error("Receivednon-JSONresponse:",awaitresponse.text());alert('Receivedanunexpectedresponsefromtheserver.Pleasetryagain.');}}catch(error){console.error('Error:',error);alert('Anerroroccurredduringregistration:'+error.message);}});document.getElementById('arrowbackregister').addEventListener('click',function(event){event.preventDefault();navigateTo('/login');});//carrouseldocument.getElementById('carousel-control-next-icon').addEventListener('click',function(event){event.preventDefault();$('#carouselExampleControls').carousel('next');});document.getElementById('carousel-control-prev-icon').addEventListener('click',function(event){event.preventDefault();$('#carouselExampleControls').carousel('prev');});document.getElementById('registerbutton42').addEventListener('click',function(event){event.preventDefault();window.location.href='/api/auth/42/';});}functiongetCookie(name){letcookieValue=null;if(document.cookie&&document.cookie!==''){constcookies=document.cookie.split(';');for(leti=0;i<cookies.length;i++){constcookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}returncookieValue;}
===== ./ft_trans/pong/templates/js/views/login.js =====
import{navigateTo}from'../app.js';import{getCsrfToken}from'../utils/token.js';exportfunctionlogin(){console.log('loginview');document.getElementById('ft_transcendence').innerHTML=`<imgsrc="${staticUrl}content/logo_400_400.png"id="logo_pong_login"alt="Logo"width="250"height="250"style="margin-bot:10%;"><divclass="containerlogin-container"><formid="loginForm"><p><labelfor="username"style="margin-top:3%;">username</label><inputtype="text"class="value=""placeholder="EnterUsername"id="username"></p><p><labelfor="password">password</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="EnterPassword"id="password"class="password"><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><buttontype="submit"class="btnbtn-primary">Login</button><divclass="text-center"><buttontype="button"id="create_account"class="btnbtn-outline-light">Createaccount</button></div></form></div><divclass="position-fixedtop-0start-50translate-middle-xp-3"style="z-index:11"><divid="loginToast"class="toast"role="alert"aria-live="assertive"aria-atomic="true"><divclass="toast-headerbg-dangertext-white"><strongclass="me-auto">LoginError</strong><buttontype="button"class="btn-close"data-bs-dismiss="toast"aria-label="Close"></button></div><divclass="toast-body">Invalidusernameorpassword</div></div></div><divclass="position-fixedtop-0start-50translate-middle-xp-3"style="z-index:11"><divid="successToast"class="toast"role="alert"aria-live="assertive"aria-atomic="true"><divclass="toast-headerbg-successtext-white"><strongclass="me-auto">Success</strong><buttontype="button"class="btn-close"data-bs-dismiss="toast"aria-label="Close"></button></div><divclass="toast-body">Accountcreatedsuccessfully.Pleaselogin.</div></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventLoginPage(navigateTo);checkRegistrationSuccess();}functionattachEventLoginPage(navigateTo){document.getElementById('loginForm').addEventListener('submit',handleLogin);document.getElementById('create_account').addEventListener('click',function(event){event.preventDefault();navigateTo('/register');});constcreateButton=document.getElementById('create_account');if(createButton){createButton.addEventListener('click',function(event){event.preventDefault();console.log('clicktocreateaccountbutton');navigateTo('/register');});}document.addEventListener('click',function(event){if(event.target.classList.contains('unmask')||event.target.closest('.unmask')){constbutton=event.target.closest('.unmask');constinput=button.previousElementSibling;if(input.type==='password'){input.type='text';button.querySelector('i').classList.remove('fa-lock');button.querySelector('i').classList.add('fa-lock-open');}else{input.type='password';button.querySelector('i').classList.remove('fa-lock-open');button.querySelector('i').classList.add('fa-lock');}}});document.addEventListener("keydown",function(event){if(event.key==="Enter"){document.getElementById('loginForm').dispatchEvent(newEvent('submit'));}});}asyncfunctionhandleLogin(event){event.preventDefault();constusername=document.getElementById('username').value;constpassword=document.getElementById('password').value;try{constcsrfToken=awaitgetCsrfToken();console.log("CSRFtokenobtenu:",csrfToken);constresponse=awaitfetch('/api/login/',{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken,},body:JSON.stringify({username,password}),credentials:'include',});constdata=awaitresponse.json();if(data.success){console.log('Connexionréussie');localStorage.setItem('accessToken',data.access);localStorage.setItem('refreshToken',data.refresh);localStorage.setItem('username',data.username);localStorage.setItem('display_name',data.display_name);localStorage.setItem('avatar_url',data.avatar_url);navigateTo('/dashboard');}else{console.error('Échecdelaconnexion:',data.message);showLoginToastErr(data.message);}}catch(error){console.error('Erreur:',error);showLoginToastErr('Uneerreurestsurvenue.Veuillezréessayer.');}}functionshowLoginToastErr(message){consttoastEl=document.getElementById('loginToast');consttoast=newbootstrap.Toast(toastEl);consttoastBody=toastEl.querySelector('.toast-body');toastBody.textContent=message;toast.show();}functioncheckRegistrationSuccess(){constsuccessMessage=localStorage.getItem('registrationSuccess');if(successMessage){showSuccessToast(successMessage);localStorage.removeItem('registrationSuccess');}}functionshowSuccessToast(message){consttoastEl=document.getElementById('successToast');consttoastBody=toastEl.querySelector('.toast-body');toastBody.textContent=message;consttoast=newbootstrap.Toast(toastEl);toast.show();}functionshowLoginToast(message){consttoastEl=document.getElementById('loginToast');consttoastBody=toastEl.querySelector('.toast-body');toastBody.textContent=message;consttoast=newbootstrap.Toast(toastEl);toast.show();}
===== ./ft_trans/pong/templates/js/views/dashboard.js =====
import{navigateTo}from'../app.js';import{logout,setGlobalSocket}from'../utils/token.js';letsocket;constprivateChatLogs=newMap();constusername=localStorage.getItem('username');exportfunctiongenerateRandomUsername(){constadjectives=['Happy','Clever','Brave','Calm','Eager','Jolly','Kind','Lively','Proud','Wise'];constnouns=['Lion','Eagle','Dolphin','Tiger','Panda','Fox','Wolf','Bear','Owl','Hawk'];constrandomAdjective=adjectives[Math.floor(Math.random()*adjectives.length)];constrandomNoun=nouns[Math.floor(Math.random()*nouns.length)];constrandomNumber=Math.floor(Math.random()*100);return`${randomAdjective}${randomNoun}${randomNumber}`;}exportfunctiondashboard(player_name){constusername=localStorage.getItem('username');constdisplayName=localStorage.getItem('display_name');constavatarUrl=localStorage.getItem('avatar_url');if(!username){navigateTo('/login');return;}document.getElementById('ft_transcendence').innerHTML=`<divclass="dashboard-container"><divclass="header"><aclass="navbar-brand"href="#"><imgsrc="${staticUrl}content/logo2.png"id="pongonlineLink"alt="Logo"class="logo"></a><divclass="profile-container"><imgsrc="https://i.ibb.co/FDg3t8m/avatar7.png"class="profile-iconimg-thumbnailrounded-circle"alt="ProfilePicture"id="img_profile_pic"></div></div><divclass="content"><divclass="sidebar"><h2class="title-friends">Friends</h2><ulid="friends"class="list-group"><liclass="list-group-item"data-friend="Friend1">${generateRandomUsername()}</li><liclass="list-group-item"data-friend="Friend2">${generateRandomUsername()}</li></ul></div><divclass="game-container"><iframeid="pong"title="Pong"src="http://localhost:4000"></iframe></div><divclass="chat-container"><h2class="title-chat">Chat</h2><divclass="chat-log"id="chat-log"></div><divclass="input-container"><textareaid="message-input"placeholder="Typeyourmessage..."></textarea><buttonid="send-button">Send</button></div></div></div><footer>©202442Company,Inc</footer></div>`;setupDashboardEvents(navigateTo,username);initializeSocket();checkForFriendRequests();}setInterval(checkForFriendRequests,600000);functioninitializeSocket(){if(socket&&socket.connected){console.log('ConnexionSocket.IOexistanteréutilisée');return;}constusername=localStorage.getItem('username');if(!username){console.error('Nomd\'utilisateurnontrouvé');return;}socket=io('http://localhost:3000',{transports:['websocket'],query:{username:username,}});setGlobalSocket(socket);socket.on('connect',()=>{console.log('Connectéauserveurdechat');constusername=localStorage.getItem('username');if(username){socket.emit('register',username);}});socket.on('connection_limit_reached',()=>{console.log('Limitedeconnexionatteinte');alert('Vousêtesdéjàconnectédansunautreongletoufenêtre.');socket.disconnect();});socket.on('chatmessage',(msg)=>{console.log('Messagereçuduserveur:',msg);receiveMessage(msg);});socket.on('connect_error',(error)=>{console.error('Erreurdeconnexion:',error);});}functiongenerateUniqueId(){returnDate.now().toString(36)+Math.random().toString(36).substr(2);}functionopenPrivateChat(friendName){letchatLog=privateChatLogs.get(friendName);if(!chatLog){chatLog=document.createElement('div');chatLog.id=`chat-log-${friendName}`;chatLog.className='chat-log';privateChatLogs.set(friendName,chatLog);}constchatContainer=document.getElementById('private-chats-container');chatContainer.innerHTML='';chatContainer.appendChild(chatLog);constinputContainer=document.createElement('div');inputContainer.className='input-container';inputContainer.innerHTML=`<inputtype="text"id="message-input-${friendName}"placeholder="Typeyourmessage..."><buttononclick="Message('${friendName}')">Send</button>`;chatContainer.appendChild(inputContainer);document.getElementById(`send-button-${friendName}`).addEventListener('click',()=>sendPrivateMessage(friendName));}functionreceivePrivateMessage(from,message){constchatLog=privateChatLogs.get(from);if(chatLog){chatLog.innerHTML+=`<div><strong>${from}:</strong>${message}</div>`;}else{console.log(`Receivedmessagefrom${from}:${message}`);}}functionsetupDashboardEvents(navigateTo,player_name){//Logoutdocument.getElementById('logoutLink').addEventListener('click',function(event){event.preventDefault();logout();});//Gamesolodocument.getElementById('game_alone').addEventListener('click',function(event){event.preventDefault();console.log('Playgame_alonebuttonclicked');window.location.href='http://localhost:4000';//VoiraveciFramepourouvrirlejeusansquitterlapageactuelle});//Friendmenudocument.querySelectorAll('#friends.list-group-item').forEach(item=>{item.addEventListener('click',handleFriendClick);});//Profilepicturedropdowndocument.getElementById('img_profile_pic').addEventListener('click',handleProfilePictureClick);//Hidethedropdownmenuwhenclickingoutsideofitdocument.addEventListener('click',hideDropdowns);//Preventthedropdownmenufromclosingwhenclickinginsideitdocument.getElementById('friendDropdown').addEventListener('click',(event)=>event.stopPropagation());document.getElementById('friendDropdown_chat').addEventListener('click',(event)=>event.stopPropagation());document.getElementById('profileDropdown').addEventListener('click',(event)=>event.stopPropagation());//Dropdownactionsdocument.getElementById('sendMessage').addEventListener('click',showChatbox);document.getElementById('friendDropdown_chat').querySelector('#sendMessage').addEventListener('click',showChatbox);document.getElementById('startGame').addEventListener('click',startGame);document.getElementById('settings').addEventListener('click',goTosettings);//Chatfunctionnalitisdocument.getElementById('send-button').addEventListener('click',sendMessage);//Privatemessagewithfrienddocument.getElementById('send-button2').addEventListener('click',sendPrivateMessage);//SendmessagewhenpressingEnterkeydocument.addEventListener("keydown",handleEnterKey);//Viewprofiledocument.getElementById('friendDropdown').querySelector('#viewProfile').addEventListener('click',viewProfile);document.getElementById('friendDropdown_chat').querySelector('#viewProfile').addEventListener('click',viewProfile);//Friendactionsdocument.getElementById('friendDropdown_chat').querySelector('#addToFriend').addEventListener('click',addFriend);document.getElementById('friendDropdown_chat').querySelector('#blockUser').addEventListener('click',blockUser);//Profilepicture/////////////////////////////////////////////////////////////////////////////////////////////////////////////////toastwhenaddfrienddocument.getElementById('friendDropdown_chat').querySelector('#addToFriend').addEventListener('click',function(event){event.preventDefault();vartoast=newbootstrap.Toast(document.getElementById('addFriendToast'));toast.show();});//toastwhenblockuserdocument.getElementById('friendDropdown_chat').querySelector('#blockUser').addEventListener('click',function(event){event.preventDefault();vartoast=newbootstrap.Toast(document.getElementById('blockUserToast'));toast.show();});//setInterval(fetchAndDisplayFriends,60000);}functionscrollToBottom2(friendName){constchatLog2=document.getElementById(`chat-log-${friendName}`);chatLog2.scrollTop=chatLog2.scrollHeight;}functionformatMessage(message){/*fornohtmlinjection*/if(message.startsWith("```")){return`<pre>${message}</pre>`;}/*syntax:[player_name]:message*/message=message.replace(/</g,"&lt;").replace(/>/g,"&gt;");message=message.replace(/(```[\s\S]*?```)/g,'<pre>$1</pre>');return`${message}`;}functionhandleProfilePictureClick(){event.stopPropagation();constdropdown=document.getElementById('profileDropdown');constvisibleDropdowns=document.querySelectorAll('.dropdown-menu,.dropdown-menu_chat');visibleDropdowns.forEach(dropdown=>{dropdown.style.display='none';});dropdown.style.top=`${event.clientY}px`;dropdown.style.left=`${event.clientX}px`;dropdown.style.display='block';}functionhandleFriendClick(){event.stopPropagation();constdropdown=document.getElementById('friendDropdown');constfriendName=this.getAttribute('data-friend');//HideallvisibledropdownsconstvisibleDropdowns=document.querySelectorAll('.dropdown-menu,.dropdown-menu_chat');visibleDropdowns.forEach(dropdown=>{dropdown.style.display='none';});//Positionthedropdownneartheclickedfrienditemdropdown.style.top=`${event.clientY}px`;dropdown.style.left=`${event.clientX}px`;dropdown.style.display='block';//Storetheclickedfriend'snamedropdown.setAttribute('data-friend',friendName);}functionhideDropdowns(){constdropdown=document.getElementById('friendDropdown');if(dropdown){dropdown.style.display='none';}constdropdown2=document.getElementById('friendDropdown_chat');if(dropdown2){dropdown2.style.display='none';}constdropdown3=document.getElementById('profileDropdown');if(dropdown3){dropdown3.style.display='none';}}functionshowChatbox(event){event.preventDefault();constfriendName=event.target.closest('.dropdown-menu').getAttribute('data-friend');varchatbox=newbootstrap.Offcanvas(document.getElementById('chatbox'));chatbox.show();setupPrivateChat(friendName);document.getElementById('chat-log2').innerHTML='';}functionsetupPrivateChat(friendName){constprivateChatContainer=document.getElementById('private-chats-container');privateChatContainer.innerHTML=`<h5class="offcanvas-title"id="chatboxLabel">PrivateMessage:${friendName}</h5><divclass="chat-container2"><divclass="chat-log2"id="chat-log-${friendName}"></div></div>`;loadMessages(friendName);//Updatesendbuttonclickeventdocument.getElementById('send-button2').onclick=()=>sendPrivateMessage(friendName);}functionstartGame(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Startagamewith${friendName}`);navigateTo('/gameplay');}functiongoTosettings(event){event.preventDefault();console.log('Gotosettings');navigateTo('/settings');}functionsendMessage(event){event.preventDefault();constusername=localStorage.getItem('username');constmessageInput=document.getElementById('message-input');constmessage=messageInput.value.trim();if(message!==''&&socket&&socket.connected){constmessageData={name:username,message:message};socket.emit('chatmessage',messageData);console.log('Messageenvoyé:',messageData);messageInput.value='';}elseif(!socket||!socket.connected){console.error('Laconnexionauserveurdechatn\'estpasétablie');}}functionreceiveMessage(msg){console.log('FonctionreceiveMessageappeléeavec:',msg);constchatLog=document.getElementById('chat-log');if(!chatLog){console.error("L'élémentchat-logn'existepasdansleDOM");return;}constmessageElement=document.createElement('div');//Créerl'élémentusernameetdéfinirsesattributsconstusernameElement=document.createElement('span');usernameElement.classList.add('username-link');usernameElement.dataset.friend=msg.name;usernameElement.innerText=`[${msg.name}]`;//Activerlemenudéroulantlorsquelenomd'utilisateurestcliquéusernameElement.addEventListener('click',function(event){event.preventDefault();event.stopPropagation();constisOwnUsername=msg.name===username;if(isOwnUsername){console.log('Youclickonyou\'rename');}constdropdown=isOwnUsername?document.getElementById('profileDropdown'):document.getElementById('friendDropdown_chat');constfriendName=this.dataset.friend;usernameElement.classList.add('username-link','bold-username');//MasquertouslesmenusdéroulantsvisiblesconstvisibleDropdowns=document.querySelectorAll('.dropdown-menu,.dropdown-menu_chat');visibleDropdowns.forEach(dropdown=>{dropdown.style.display='none';});//Positionnerlemenudéroulantprèsdel'élémentamicliquédropdown.style.top=`${event.clientY}px`;dropdown.style.left=`${event.clientX}px`;dropdown.style.display='block';//Stockerlenomdel'amicliquédropdown.dataset.friend=friendName;console.log('Messagereçu:',msg);});//Créerl'élémentmessageetdéfinirsontexteconstmessageTextElement=document.createElement('span');messageTextElement.innerText=`:${msg.message}`;//Ajouterlesélémentsusernameetmessageàl'élémentmessagemessageElement.appendChild(usernameElement);messageElement.appendChild(messageTextElement);chatLog.appendChild(messageElement);//Fairedéfilerjusqu'enbasduchatlogchatLog.scrollTop=chatLog.scrollHeight;//Console.logpourafficherlemessagereçuconsole.log('Messagereçudanslechat-log:',msg);}functionsendPrivateMessage(friendName){constinput=document.getElementById(`message-input-${friendName}`);if(input){constmessage=input.value.trim();if(message&&socket&&socket.connected){socket.emit('privatemessage',{to:friendName,message:message});constchatLog=privateChatLogs.get(friendName);if(chatLog){chatLog.innerHTML+=`<div><strong>You:</strong>${message}</div>`;}input.value='';}}else{console.error(`Inputelementfor${friendName}notfound`);}}functionhandleEnterKey(event){if(event.key==="Enter"){constmessageInput=document.getElementById('message-input');if(messageInput&&document.activeElement===messageInput){sendMessage(event);}}}functionaddFriend(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Add${friendName}tofriends`);}functionblockUser(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Block${friendName}`);}functionviewProfile(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Viewprofileof${friendName}`);navigateTo(`/profile/${friendName}`);}//socket.on('connect_error',(error)=>{//console.error('Connectionerror:',error);////Gérezl'erreurdemanièreappropriée//});//functionfetchAndDisplayFriends(){//functioncallAPI(url,options){//returnfetch(url,options)//.then(response=>{//if(!response.ok){//thrownewError('Erreurréseau');//}//returnresponse;//})//.catch(error=>{//console.error('Erreurlorsdel\'appelAPI:',error);//throwerror;//});//}//callAPI('http://localhost:8000/api/friends/',{//method:'GET',//headers:{//'Authorization':`Bearer${localStorage.getItem('access_token')}`,//'Content-Type':'application/json'//}//})//.then(response=>response.json())//.then(data=>{//constfriendsList=document.getElementById('friends');//friendsList.innerHTML='';//if(Array.isArray(data)){//data.forEach(friend=>{//constli=document.createElement('li');//li.className='list-group-itemd-flexjustify-content-betweenalign-items-center';//li.setAttribute('data-friend',friend.username);//conststatusDot=document.createElement('span');//statusDot.className=`status-dot${friend.is_online?'online':'offline'}`;//constusernameSpan=document.createElement('span');//usernameSpan.textContent=friend.username;//li.appendChild(statusDot);//li.appendChild(usernameSpan);//li.addEventListener('click',handleFriendClick);//friendsList.appendChild(li);//});//}else{//console.error('Lesdonnéesreçuesnesontpasuntableau:',data);//}//})//.catch(error=>{//console.error('Erreurlorsdelarécupérationdesamis:',error);//});//}functionsaveMessage(friendName,message){letmessages=JSON.parse(localStorage.getItem(`chat_${friendName}`))||[];messages.push({sender:'Player',message:message});localStorage.setItem(`chat_${friendName}`,JSON.stringify(messages));}functionloadMessages(friendName){constchatLog=document.getElementById(`chat-log-${friendName}`);constmessages=JSON.parse(localStorage.getItem(`chat_${friendName}`))||[];chatLog.innerHTML='';//Effacerlesmessagesprécédentsmessages.forEach(msg=>{constmessageElement=document.createElement('div');messageElement.innerHTML=`<spanclass="username-linkbold-username">[${msg.sender}]:</span>${msg.message}`;chatLog.appendChild(messageElement);});chatLog.scrollTop=chatLog.scrollHeight;}//FunctiontoshowthefriendrequesttoastfunctionshowFriendRequestToast(friendName,requestId){consttoastElement=document.querySelector('.toast');consttoast=newbootstrap.Toast(toastElement,{autohide:false});document.getElementById('friend-name').textContent=friendName;constacceptButton=document.getElementById('accept-friend');constrefuseButton=document.getElementById('refuse-friend');acceptButton.onclick=()=>{acceptFriendRequest(requestId);toast.hide();};refuseButton.onclick=()=>{refuseFriendRequest(requestId);toast.hide();};toast.show();}//FunctiontohandleacceptingafriendrequestasyncfunctionacceptFriendRequest(requestId){try{constresponse=awaitfetch('/api/friend-requests/accept',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer${localStorage.getItem('access_token')}`},body:JSON.stringify({requestId})});if(response.ok){console.log(`Friendrequest${requestId}accepted`);//YoumightwanttoupdatetheUIhere,e.g.,addthefriendtothefriendslist}else{console.error('Failedtoacceptfriendrequest');}}catch(error){console.error('Erroracceptingfriendrequest:',error);}}//FunctiontohandledecliningafriendrequestasyncfunctionrefuseFriendRequest(requestId){try{constresponse=awaitfetch('/api/friend-requests/decline',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer${localStorage.getItem('access_token')}`},body:JSON.stringify({requestId})});if(response.ok){console.log(`Friendrequest${requestId}declined`);}else{console.error('Failedtodeclinefriendrequest');}}catch(error){console.error('Errordecliningfriendrequest:',error);}}//FunctiontocheckfornewfriendrequestsasyncfunctioncheckForFriendRequests(){try{constresponse=awaitfetch('/api/friend-requests',{headers:{'Authorization':`Bearer${localStorage.getItem('access_token')}`}});if(!response.ok){thrownewError(`HTTPerror!status:${response.status}`);}constcontentType=response.headers.get("content-type");if(!contentType||!contentType.includes("application/json")){thrownewTypeError("Laréponsen'estpasduJSONvalide");}constrequests=awaitresponse.json();requests.forEach(request=>{showFriendRequestToast(request.fromUserName,request.id);});}catch(error){console.error('Errorcheckingforfriendrequests:',error);//Gérerl'erreurdemanièreappropriée(parexemple,afficherunmessageàl'utilisateur)}}
===== ./ft_trans/pong/templates/js/views/settings.js =====
import{navigateTo}from'../app.js';import{logout}from'../utils/token.js';constplayer_name=localStorage.getItem('player_name')||'Player';exportfunctionsettings(){constusername=localStorage.getItem('username');if(!username){navigateTo('/login');return;}console.log('settingsview');document.getElementById('ft_transcendence').innerHTML=`<divclass="dashboard-container"><ulclass="navjustify-content-betweenalign-items-center"><aclass="navbar-brand"href="#"><imgsrc="${staticUrl}content/logo2.png"id="pongonlineLink"alt="Logo"width="30"height="30"></a><liclass="nav-item"><aclass="nav-linkdisabled">${player_name}</a></li><liclass="nav-item"><aclass="nav-link"href="#"id="logoutLink">Logout</a></li></ul><h3id="header-dashboard"class="text-center">UserSettings</h3><divclass="containermt-4"><formid="settingsForm"><divclass="mb-3"><labelfor="displayName"class="form-label">DisplayName</label><inputtype="text"class="form-control"id="displayName"name="displayName"></div><divclass="mb-3"><labelfor="email"class="form-label">Email</label><inputtype="email"class="form-control"id="email"name="email"></div><divclass="mb-3"><labelfor="avatar"class="form-label">Avatar</label><divclass="d-flexalign-items-center"><imgid="currentAvatar"src="https://i.ibb.co/FDg3t8m/avatar7.png"alt="CurrentAvatar"class="img-thumbnailrounded-circleme-3"style="width:100px;height:100px;"><inputtype="file"class="form-control"id="avatar"name="avatar"accept="image/*"></div></div><divclass="mb-3"><divclass="form-check"><inputclass="form-check-input"type="checkbox"id="emailNotifications"name="emailNotifications"><labelclass="form-check-label"for="emailNotifications">EmailNotifications</label></div></div><buttontype="submit"class="btnbtn-primary">SaveSettings</button></form><h4class="mt-5">ChangePassword</h4><formid="changePasswordForm"><divclass="mb-3"><labelfor="newPassword"class="form-label">NewPassword</label><inputtype="password"class="form-control"id="newPassword"name="newPassword"></div><divclass="mb-3"><labelfor="confirmPasswordsetttings"class="form-label">ConfirmNewPassword</label><inputtype="password"class="form-control"id="confirmPasswordsetttings"name="confirmPasswordsetttings"></div><buttontype="submit"class="btnbtn-primary"style="margin-bottom:3%;margin-top:10%;">ChangePassword</button></form><buttonid="backToDashboard"class="btnbtn-primary"style="margin-bottom:3%;">BacktoDashboard</button></div></div><footerclass="py-3my-4"style="margin-top:5%;"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer><divclass="position-fixedtop-0start-50translate-middle-xp-3"style="z-index:11"><divid="saveSettingsToast"class="toast"aria-live="assertive"aria-atomic="true"><divclass="toast-header"><strongclass="me-auto">SettingsSaved!</strong><buttontype="button"class="btn-close"data-bs-dismiss="toast"aria-label="Close"></button></div><divclass="toast-body">Yourprofilesettingshavebeensuccessfullyupdated.</div></div></div><divclass="position-fixedtop-0start-50translate-middle-xp-3"style="z-index:11"><divid="savePasswordToast"class="toast"aria-live="assertive"aria-atomic="true"><divclass="toast-header"><strongclass="me-auto">PasswordSaved!</strong><buttontype="button"class="btn-close"data-bs-dismiss="toast"aria-label="Close"></button></div><divclass="toast-body">Yourpasswordhavebeensuccessfullyupdated.</div></div></div>`;attachEventSettingsPage(navigateTo,player_name);}functionattachEventSettingsPage(navigateTo,player_name){constpongonlineLink=document.getElementById('pongonlineLink');constlogoutLink=document.getElementById('logoutLink');constbackToDashboard=document.getElementById('backToDashboard');constsettingsForm=document.getElementById('settingsForm');constchangePasswordForm=document.getElementById('changePasswordForm');constavatarInput=document.getElementById('avatar');pongonlineLink.addEventListener('click',(event)=>{event.preventDefault();navigateTo('/dashboard');});logoutLink.addEventListener('click',(event)=>{logout();});backToDashboard.addEventListener('click',()=>navigateTo('/dashboard'));settingsForm.addEventListener('submit',(event)=>{event.preventDefault();showUpdateProfileToast();//Hereyouwouldtypicallysendtheformdatatoyourbackendconsole.log('Settingssaved',Object.fromEntries(formData));alert('Settingssavedsuccessfully!');});changePasswordForm.addEventListener('submit',(event)=>{event.preventDefault();constnewPassword=document.getElementById('newPassword').value;constconfirmPassword=document.getElementById('confirmPasswordsetttings').value;if(newPassword!==confirmPassword){alert('Passwordsdonotmatch');return;}//Hereyouwouldtypicallysendthenewpasswordtoyourbackendconsole.log('Passwordchanged');showsavePasswordToast();});avatarInput.addEventListener('change',(event)=>{constfile=event.target.files[0];if(file){constreader=newFileReader();reader.onload=(e)=>{document.getElementById('currentAvatar').src=e.target.result;};reader.readAsDataURL(file);}});//Pre-fillformfieldsdocument.getElementById('displayName').value=player_name;document.getElementById('email').value='newmail@example.com';document.getElementById('emailNotifications').checked=true;}functionshowUpdateProfileToast(){consttoastEl=document.getElementById('saveSettingsToast');consttoast=newbootstrap.Toast(toastEl);toast.show();}functionshowsavePasswordToast(){consttoastEl=document.getElementById('savePasswordToast');consttoast=newbootstrap.Toast(toastEl);toast.show();}
===== ./ft_trans/pong/templates/js/app.js =====
import{login}from'./views/login.js';import{register}from'./views/register.js';import{dashboard}from'./views/dashboard.js';import{profile}from'./views/profile.js';import{settings}from'./views/settings.js';import{generateRandomUsername}from'./views/dashboard.js';//Déclarationderoutercommeunevariableglobaleaumoduleletrouter;functioninitRouter(){router=function(){constpath=window.location.pathname;//ListedesroutesprotégéesconstprotectedRoutes=['/dashboard','/settings'];//Vérifiersil'utilisateurtented'accéderàunerouteprotégéesansêtreconnectéif(protectedRoutes.includes(path)&&!isUserLoggedIn()){console.log('Accèsnonautorisé.Redirectionverslapagedeconnexion.');navigateTo('/login');return;}if(path.startsWith('/profile/')){constfriendName=decodeURIComponent(path.split('/').pop());profile(friendName);}else{switch(path){case'/':login();break;case'/login':if(isUserLoggedIn()){navigateTo('/dashboard');}else{login();}break;case'/dashboard':dashboard();break;case'/register':if(isUserLoggedIn()){navigateTo('/dashboard');}else{register();}break;case'/settings':settings();break;default:console.log('404:Pagenotfound');//Vouspouvezajoutericiunepage404personnaliséesivouslesouhaitez}}};window.addEventListener('popstate',router);//Gestionnairepourlesclicssurlesliensdocument.body.addEventListener('click',e=>{if(e.target.matches('[data-link]')){e.preventDefault();navigateTo(e.target.getAttribute('href'));}});//Initialroutecallrouter();}exportfunctionnavigateTo(pathname){constprotectedRoutes=['/dashboard','/settings'];if(protectedRoutes.includes(pathname)&&!isUserLoggedIn()){console.log('Accèsnonautorisé.Redirectionverslapagedeconnexion.');pathname='/login';}constfullPath=window.location.origin+pathname;window.history.pushState({},pathname,fullPath);router();}document.addEventListener('DOMContentLoaded',initRouter);functionisUserLoggedIn(){returnlocalStorage.getItem('username')!==null;}//ExportezégalementinitRoutersivousenavezbesoinailleursexport{initRouter};
===== ./ft_trans/pong/urls.py =====
fromdjango.urlsimportpathfrom.importviewsfromrest_framework_simplejwt.viewsimportTokenObtainPairView,TokenRefreshViewurlpatterns=[path('api/auth/42/',views.auth_42_redirect,name='auth_42_redirect'),path('api/auth/42/callback/',views.auth_42_callback,name='auth_42_callback'),path('api/content/',views.content,name='content'),path('api/set-csrf-token/',views.set_csrf_token,name='set_csrf_token'),path('api/token/',TokenObtainPairView.as_view(),name='token_obtain_pair'),path('api/token/refresh/',TokenRefreshView.as_view(),name='token_refresh'),path('api/create_user/',views.create_user,name='create_user'),path('api/register/',views.register_view,name='register'),path('api/login/',views.login_view,name='login'),path('/api/friend-requests',views.friend_requests,name='friend_requests'),path('api/user/<str:display_name>/',views.get_user_by_display_name,name='get_user_by_display_name'),path('',views.index,name='index'),path('<path:path>',views.index,name='catch_all'),]
===== ./ft_trans/pong/views.py =====
fromdjango.httpimportJsonResponsefromdjango.contrib.auth.modelsimportUserfromdjango.contrib.authimportauthenticate,loginfromdjango.views.decorators.csrfimportcsrf_exemptfromdjango.views.decorators.csrfimportensure_csrf_cookiefromdjango.shortcutsimportrenderfromdjango.middleware.csrfimportget_tokenfromrest_framework_simplejwt.tokensimportRefreshTokenfromdjango.dbimportIntegrityErrorfromdjango.shortcutsimportredirectimportjsonimportloggingimportrequestslogger=logging.getLogger(__name__)fromdjango.utilsimporttimezonefromdjango.contrib.authimportget_user_modelfrom.modelsimportCustomUserfromdjango.contrib.auth.hashersimportcheck_password,make_passwordfromdjango.views.decorators.httpimportrequire_GETfromdjango.confimportsettingsfromrest_framework.decoratorsimportapi_view,permission_classesfromrest_framework.permissionsimportIsAuthenticatedUser=get_user_model()defcreate_user(request):ifrequest.method=='POST':data=json.loads(request.body)user=User.create_user(data['username'],data=data['password'])returnJsonResponse({'message':'usercreatedwithid'+str(user.id)},status=201)else:returnJsonResponse({'error':'invalidrequest'},status=400)defindex(request,path=''):returnrender(request,'index.html')@ensure_csrf_cookiedeflogin_view(request):ifrequest.method=='POST':try:data=json.loads(request.body)username=data.get('username')password=data.get('password')user=authenticate(request,username=username,password=password)ifuserisnotNone:login(request,user)#CréationdutokenJWTrefresh=RefreshToken.for_user(user)returnJsonResponse({'success':True,'message':'Connexionréussie','access':str(refresh.access_token),'refresh':str(refresh),'username':user.username,'display_name':user.display_name,'avatar_url':user.avatar_url,},status=200)else:returnJsonResponse({'success':False,'message':'Identifiantsinvalides'},status=401)exceptjson.JSONDecodeError:returnJsonResponse({'success':False,'message':'DonnéesJSONinvalides'},status=400)exceptExceptionase:logger.error(f"Erreurlorsdelaconnexion :{str(e)}")returnJsonResponse({'success':False,'message':'Uneerreurestsurvenue'},status=500)returnJsonResponse({'success':False,'message':'Méthodenonautorisée'},status=405)defcontent(request):returnJsonResponse({'message':'contentpage'},status=200)@ensure_csrf_cookiedefregister_view(request):ifrequest.method=='POST':try:data=json.loads(request.body)username=data.get('username')email=data.get('email')password=data.get('password')avatar_url=data.get('avatar_url')ifUser.objects.filter(username=username).exists():returnJsonResponse({'success':False,'error':'Cenomd\'utilisateurestdéjàpris.'},status=400)ifUser.objects.filter(email=email).exists():returnJsonResponse({'success':False,'error':'Cetemailestdéjàutilisé.'},status=400)user=User.objects.create_user(username=username,email=email,password=password,avatar_url=avatar_url,display_name=username,)refresh=RefreshToken.for_user(user)returnJsonResponse({'success':True,'message':'Comptecrééavecsuccès.','access':str(refresh.access_token),'refresh':str(refresh),},status=201)exceptjson.JSONDecodeError:returnJsonResponse({'success':False,'error':'DonnéesJSONinvalides.'},status=400)exceptIntegrityErrorase:logger.error(f"Erreurlorsdel'inscription:{str(e)}")returnJsonResponse({'success':False,'error':'Erreurlorsdel\'inscription.'},status=500)exceptExceptionase:logger.error(f"Erreurlorsdel'inscription:{str(e)}")returnJsonResponse({'success':False,'error':'Uneerreurestsurvenue.'},status=500)returnJsonResponse({'success':False,'error':'Méthodenonautorisée.'},status=405)@ensure_csrf_cookiedefset_csrf_token(request):token=get_token(request)logger.info(f"CSRFTokengenerated:{token}")returnJsonResponse({'csrfToken':get_token(request)})@api_view(['GET','POST'])@permission_classes([IsAuthenticated])deffriend_requests(request):pass@require_GETdefget_user_by_display_name(request,display_name):try:user=User.objects.get(display_name=display_name)user_data={'username':user.username,'email':user.email,'avatar_url':user.avatar_url,'display_name':user.display_name,'is_online':user.is_online,'wins':user.wins,'losses':user.losses,}returnJsonResponse({'success':True,'user':user_data})exceptUser.DoesNotExist:returnJsonResponse({'success':False,'error':'Usernotfound'},status=404)defauth_42_redirect(request):redirect_uri=request.build_absolute_uri('/api/auth/42/callback/')returnredirect(f'https://api.intra.42.fr/oauth/authorize?client_id=u-s4t2ud-0bdec356ea53d09b3992d0f90a9e4b9cdf8d0659d321388f9ba8ee3a41448165&redirect_uri=http%3A%2F%2Flocalhost%3A8000%2F%3Fauth_success%3Dtrue&response_type=code')@csrf_exemptdefauth_42_callback(request):try:code=request.GET.get('code')logger.info(f"Codereçu:{code}")ifnotcode:raiseValueError('Nocodeprovided')redirect_uri=request.build_absolute_uri('/api/auth/42/callback/')logger.info(f"URIderedirection:{redirect_uri}")#Échangeducodecontreuntokentoken_response=requests.post('https://api.intra.42.fr/oauth/token',data={'grant_type':'authorization_code','client_id':settings.FT_CLIENT_ID,'client_secret':settings.FT_CLIENT_SECRET,'code':code,'redirect_uri':redirect_uri})logger.info(f"Réponsedutoken:{token_response.status_code}-{token_response.text}")ifuser_info_response.status_code!=200:raiseValueError(f'Failedtoobtainaccesstoken:{user_info_response.text}')access_token=user_info_response.json()['access_token']#Récupérationdesinformationsdel'utilisateuruser_info_response=requests.get('https://api.intra.42.fr/v2/me',headers={'Authorization':f'Bearer{access_token}'})ifuser_info_response.status_code!=200:raiseValueError(f'Failedtogetuserinfo:{user_info_response.text}')user_info=user_info_response.json()#Créationoumiseàjourdel'utilisateurdanslabasededonnéesuser,created=CustomUser.objects.get_or_create(username=user_info['login'],defaults={'email':user_info.get('email',''),'avatar_url':user_info.get('image',{}).get('link',''),'display_name':user_info.get('displayname',user_info['login']),})ifnotcreated:#Miseàjourdesinformationssil'utilisateurexistedéjàuser.email=user_info.get('email',user.email)user.avatar_url=user_info.get('image',{}).get('link',user.avatar_url)user.display_name=user_info.get('displayname',user.display_name)user.save()logger.info(f"Existinguserupdated:{user.username}")else:logger.info(f"Newusercreated:{user.username}")#Connexiondel'utilisateurlogin(request,user)logger.info(f"User{user.username}loggedinsuccessfully")#Redirectionverslapaged'accueilavecunparamètredesuccèsreturnredirect('/?auth_success=true')exceptExceptionase:logger.error(f"Errorduring42authentication:{str(e)}")returnJsonResponse({'error':str(e)},status=500)exceptExceptionase:logger.error(f"Errorduring42authentication:{str(e)}")returnJsonResponse({'error':str(e)},status=500)
===== ./ft_trans/ft_trans/asgi.py =====
"""ASGIconfigforft_transproject.ItexposestheASGIcallableasamodule-levelvariablenamed``application``.Formoreinformationonthisfile,seehttps://docs.djangoproject.com/en/5.0/howto/deployment/asgi/"""importosfromdjango.core.asgiimportget_asgi_applicationos.environ.setdefault('DJANGO_SETTINGS_MODULE','ft_trans.settings')application=get_asgi_application()
===== ./ft_trans/ft_trans/settings.py =====
"""Djangosettingsforft_transproject.Generatedby'django-adminstartproject'usingDjango5.0.7.Formoreinformationonthisfile,seehttps://docs.djangoproject.com/en/5.0/topics/settings/Forthefulllistofsettingsandtheirvalues,seehttps://docs.djangoproject.com/en/5.0/ref/settings/"""frompathlibimportPathfromdatetimeimporttimedelta#Buildpathsinsidetheprojectlikethis:BASE_DIR/'subdir'.BASE_DIR=Path(__file__).resolve().parent.parent#Quick-startdevelopmentsettings-unsuitableforproduction#Seehttps://docs.djangoproject.com/en/5.0/howto/deployment/checklist/#SECURITYWARNING:keepthesecretkeyusedinproductionsecret!SECRET_KEY='django-insecure-69i@hqe0&ym6z6o7nho0vxoqwn24bg4a4f&_6fxqdkh9s5!ym5'#SECURITYWARNING:don'trunwithdebugturnedoninproduction!DEBUG=TrueALLOWED_HOSTS=[]APPEND_SLASH=FalseALLOWED_HOSTS=['localhost','127.0.0.1']#ApplicationdefinitionINSTALLED_APPS=['django.contrib.admin','django.contrib.auth','django.contrib.contenttypes','django.contrib.sessions','django.contrib.messages','django.contrib.staticfiles','rest_framework','rest_framework.authtoken','corsheaders','rest_framework_simplejwt','pong',]MIDDLEWARE=['django.middleware.security.SecurityMiddleware','django.contrib.sessions.middleware.SessionMiddleware','corsheaders.middleware.CorsMiddleware','django.middleware.common.CommonMiddleware','django.middleware.csrf.CsrfViewMiddleware','django.contrib.auth.middleware.AuthenticationMiddleware','django.contrib.messages.middleware.MessageMiddleware','django.middleware.clickjacking.XFrameOptionsMiddleware',]CORS_ALLOWED_ORIGINS=["http://localhost:8000","http://127.0.0.1:8080",]CORS_ALLOW_CREDENTIALS=TrueROOT_URLCONF='ft_trans.urls'TEMPLATES=[{'BACKEND':'django.template.backends.django.DjangoTemplates','DIRS':[],'APP_DIRS':True,'OPTIONS':{'context_processors':['django.template.context_processors.debug','django.template.context_processors.request','django.contrib.auth.context_processors.auth','django.contrib.messages.context_processors.messages',],},},]WSGI_APPLICATION='ft_trans.wsgi.application'#Database#https://docs.djangoproject.com/en/5.0/ref/settings/#databasesDATABASES={'default':{'ENGINE':'django.db.backends.postgresql_psycopg2','NAME':'db','USER':'fabriciopa','PASSWORD':'5472','HOST':'db','PORT':'5432',}}#Passwordvalidation#https://docs.djangoproject.com/en/5.0/ref/settings/#auth-password-validatorsAUTH_PASSWORD_VALIDATORS=[{'NAME':'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',},{'NAME':'django.contrib.auth.password_validation.MinimumLengthValidator',},{'NAME':'django.contrib.auth.password_validation.CommonPasswordValidator',},{'NAME':'django.contrib.auth.password_validation.NumericPasswordValidator',},]#Internationalization#https://docs.djangoproject.com/en/5.0/topics/i18n/LANGUAGE_CODE='en-us'TIME_ZONE='UTC'USE_I18N=TrueUSE_TZ=True#Staticfiles(CSS,JavaScript,Images)#https://docs.djangoproject.com/en/5.0/howto/static-files/STATIC_URL='static/'STATICFILES_DIRS=[BASE_DIR/'pong/templates/',]#Defaultprimarykeyfieldtype#https://docs.djangoproject.com/en/5.0/ref/settings/#default-auto-fieldDEFAULT_AUTO_FIELD='django.db.models.BigAutoField'REST_FRAMEWORK={'DEFAULT_AUTHENTICATION_CLASSES':['rest_framework_simplejwt.authentication.JWTAuthentication',],}SIMPLE_JWT={#forjwt'ACCESS_TOKEN_LIFETIME':timedelta(minutes=60),'REFRESH_TOKEN_LIFETIME':timedelta(days=1),}AUTH_USER_MODEL='pong.CustomUser'AUTHENTICATION_BACKENDS=['django.contrib.auth.backends.ModelBackend',]LOGGING={'version':1,'disable_existing_loggers':False,'handlers':{'console':{'class':'logging.StreamHandler',},},'root':{'handlers':['console'],'level':'INFO',},}#asecuriseravecimportosetos.getenv('FT_CLIENT_ID')etos.getenv('FT_CLIENT_SECRET')FT_CLIENT_ID='u-s4t2ud-0bdec356ea53d09b3992d0f90a9e4b9cdf8d0659d321388f9ba8ee3a41448165'FT_CLIENT_SECRET='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'
===== ./ft_trans/ft_trans/urls.py =====
"""URLconfigurationforft_transproject.The`urlpatterns`listroutesURLstoviews.Formoreinformationpleasesee:https://docs.djangoproject.com/en/5.0/topics/http/urls/Examples:Functionviews1.Addanimport:frommy_appimportviews2.AddaURLtourlpatterns:path('',views.home,name='home')Class-basedviews1.Addanimport:fromother_app.viewsimportHome2.AddaURLtourlpatterns:path('',Home.as_view(),name='home')IncludinganotherURLconf1.Importtheinclude()function:fromdjango.urlsimportinclude,path2.AddaURLtourlpatterns:path('blog/',include('blog.urls'))"""fromdjango.contribimportadminfromdjango.urlsimportpath,includeurlpatterns=[path('admin/',admin.site.urls),path('',include('pong.urls')),]
===== ./ft_trans/ft_trans/wsgi.py =====
"""WSGIconfigforft_transproject.ItexposestheWSGIcallableasamodule-levelvariablenamed``application``.Formoreinformationonthisfile,seehttps://docs.djangoproject.com/en/5.0/howto/deployment/wsgi/"""importosfromdjango.core.wsgiimportget_wsgi_applicationos.environ.setdefault('DJANGO_SETTINGS_MODULE','ft_trans.settings')application=get_wsgi_application()
