===== ../index.html =====
{%loadstatic%}<!DOCTYPEhtml><htmllang="en"><head><linkrel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"><linkrel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"><style>@importurl('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');</style><metacharset="UTF-8"><metaname="viewport"content="width=device-width,initial-scale=1.0"><title>ft_transcendence</title><linkhref="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"rel="stylesheet"integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"crossorigin="anonymous"><linkrel="stylesheet"href="{%static'css/styles.css'%}"><linkrel="stylesheet"href="{%static'css/avatar.css'%}"><linkrel="stylesheet"href="{%static'css/caroussel.css'%}"></head><body><divid="ft_transcendence"></div><scriptsrc="{%static'js/app.js'%}"></script><scriptsrc="{%static'js/utils/unmask.js'%}"></script><scriptsrc="{%static'js/utils/register_avatar.js'%}"></script><scriptsrc="{%static'js/views/login.js'%}"></script><scriptsrc="{%static'js/views/register.js'%}"></script><scriptsrc="{%static'js/views/dashboard.js'%}"></script><scriptsrc="{%static'js/utils/chatbox.js'%}"></script><scriptsrc="{%static'js/views/gameplay_friends.js'%}"></script><scriptsrc="{%static'js/views/gameplay.js'%}"></script><scriptsrc="{%static'js/views/profile.js'%}"></script><scriptsrc="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script><scriptsrc="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script><scriptsrc="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script></body></html>
===== ../css/styles.css =====
html,body{height:100%;margin:0;background-color:#e3d6c1;}body{display:flex;flex-direction:column;justify-content:space-between;/*footerenbas*/align-items:center;}#ft_transcendence{height:100%;width:100%;}.dashboard-container{display:flex;flex-direction:column;flex:1;/*Permetàcetélémentdeprendretoutl'espacedisponible*/width:95%;margin:0;padding:0;}#logo_pong_login{display:block;margin:0auto;}/*otherexistingstyles*/.login-register-page{display:flex;justify-content:center;align-items:center;height:90vh;margin:0;margin-left:5%;margin-right:5%;}#create_account{margin-top:3%;}.view{display:none;padding:20px;}.active-view{display:block;}h1{text-align:center;margin-bottom:3%;margin-top:2%;font-weight:900;/*margin-bottom:220px;*/}.login-containerh1{display:flex;justify-content:center;align-items:center;max-width:150%;max-height:150%;}.container{display:flex;flex-direction:column;justify-content:center;align-items:center;/*width:100%;*/padding:20px;background-color:#307f3d;border-radius:30px;box-shadow:0px0px10px0pxrgba(0,0,0,0.1);border:5pxsolidblack;max-width:30%;}form{width:100%;}p{margin-bottom:20px;}label{display:block;text-align:center;margin-bottom:15px;width:100%;font-weight:900;box-sizing:border-box;}input[type="text"],input[type="password"]{width:calc(100%);padding:10px;margin-bottom:10px;border:1pxsolid#ccc;background-color:#307f3d;border-radius:30px;border:1pxsolidblack;justify-content:center;display:flex;align-items:center;}.unmask{margin-top:10px;padding:10px;background-color:#fff;border:1pxsolid#ccc;border-radius:5px;cursor:pointer;}.btn{width:75%;padding:10px;background-color:#307f3d;border:none;border-radius:30px;color:#ffffff;font-size:16px;}.btn-primary{display:flex;justify-content:center;align-items:center;background-color:#307f3d;border:3pxsolidblack;margin:0auto;width:75%;}.btn-container{display:flex;justify-content:center;align-items:center;margin-top:3%;}#username{width:75%;display:flex;justify-content:center;margin-left:auto;margin-right:auto;}.img-thumbnail{width:100%;height:100%;}/*button*/.btn-primary{background-color:#307f3d;border:3pxsolidblack;}.btn-primary:hover{background-color:#e3d6c1;border:3pxsolidblack;}.btn-danger{background-color:red;border:3pxsolidblack;}.btn-block{display:block;width:100%;}input::placeholder{color:#e3d6c1;}/*forpasswordvisibilitytoggle*/.password-wrapper{display:flex;justify-content:center;align-items:center;position:relative;margin-left:auto;margin-right:auto;width:75%;}.password-wrapperinput[type="text"],.password-wrapperinput[type="password"]{width:calc(100%-40px);width:100%;padding-right:40px;box-sizing:border-box;display:flex;}.password-wrapper.unmask{position:absolute;right:10px;top:-15%;background:none;border:none;cursor:pointer;color:black;}.navbar{color:#307f3d;/*mettreenhautdelapage*/position:fixed;/*top:0;width:100%;z-index:1000;*/}.container-fluid{padding-left:0;padding-right:0;width:100%;}@media(max-width:768px){.user-info{width:100%;padding:20px;}}#registerbutton,#registerbutton42{margin-bottom:10px;width:75%;}#profile-picture{display:flex;justify-content:center;align-items:center;margin-bottom:50px;margin-top:30px;margin-left:auto;margin-right:auto;border-radius:100px;border:3pxsolidblack;}.img-thumbnail{width:200px;height:200px;/*object-fit:cover;*/border-radius:50%;padding:0;}#start_button{margin-top:10px;margin-bottom:10px;}#loginAlert{margin-left:36%;margin-right:36%;border-radius:30px;text-align:center;border:2pxsolidblack;background-color:#d93d35;border:2pxsolidblack;color:white;font-weight:900;}#arrowbackregister{font-weight:800;/*aria-current="page";*/display:flex;justify-content:center;margin-left:auto;margin-right:auto;margin-bottom:1%;border:3pxsolidblack;max-width:10%;border-radius:30px;}#title_dashboard{display:flex;justify-content:center;margin-left:auto;margin-right:auto;}#play_button{display:flex;}/*footer*/footer{text-align:center;width:100%;display:flex;justify-content:space-evenly;align-items:center;position:fixed;bottom:-50px;}#friends{display:flex;/*justify-content:center;*//*align-items:center;*/margin-left:5%;}.game-container{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:2%;/*margin-bottom:50px;*/min-width:85%;min-height:85%;height:auto;width:auto;}#header-dashboard{display:flex;justify-content:center;align-items:center;flex-direction:column;margin-top:10px;margin-bottom:10px;/*margin-top:50px;*//*margin-bottom:50px;*/}.dropdown-menu,.dropdown-menu_chat{display:none;position:absolute;border:2pxsolidblack;background-color:#307f3d;z-index:1000;}.dropdown-menu::shadow,.dropdown-menu_chat::shadow{display:block;background-color:#e3d6c1;}/*chat*/div.input-container{display:flex;justify-content:center;align-items:end;margin-top:10px;margin-bottom:10px;margin-left:10px;margin-right:10px;}#send-button{padding:5px10px;border-radius:5px;border:none;background-color:#307f3d;color:#ffffff;cursor:pointer;}#message-input{flex:1;padding:5px;border-radius:5px;border:none;resize:vertical;margin-right:10px;min-height:35px;}.chat-container{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;border-radius:10px;margin-top:10px;margin-bottom:10px;margin-left:10px;margin-right:10px;height:270px;}.chat-log{flex:1;overflow-y:scroll;padding:10px;margin-left:10px;margin-right:10px;}.input-container{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:10px;}.avatar-image{width:250px;height:250px;object-fit:cover;transition:transform2sease,opacity2sease;}.carousel-item-next,.carousel-item-prev,.carousel-item.active{opacity:0;transform:scale(0.8);}.carousel-item-next.carousel-item-left,.carousel-item-prev.carousel-item-right,.carousel-item.active{opacity:1;transform:scale(1);}/*tchat2*/div.input-container2{display:flex;justify-content:center;align-items:end;margin-top:10px;margin-bottom:10px;margin-left:10px;margin-right:10px;}#send-button2{padding:5px10px;border-radius:5px;border:none;background-color:#307f3d;color:#ffffff;cursor:pointer;}#message-input2{flex:1;padding:5px;border-radius:5px;border:none;resize:vertical;margin-right:10px;min-height:35px;}.chat-container2{display:flex;flex-direction:column;justify-content:space-between;align-items:stretch;border-radius:10px;margin:10px;flex:1;}.chat-log2{flex:1;overflow-y:scroll;padding:10px;margin-left:10px;margin-right:10px;}.input-container2{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:10px;}.offcanvas-body{display:flex;flex-direction:column;height:100%;}/*profilepage*/#login_card{display:flex;justify-content:center;align-items:center;margin-top:10px;margin-bottom:10px;margin-left:auto;margin-right:auto;border-radius:30px;border:3pxsolidblack;max-width:60%;}.btn-dark{background-color:#307f3d;border:3pxsolidblack;/*center,sameweightofprofilepictureborderradius30px*/margin-left:auto;margin-right:auto;width:25%;border-radius:30px;}
===== ./server.js =====
constexpress=require('express');const{Pool}=require('pg');constapp=express();constport=8000;constpool=newPool({user:'fabriciopa',host:'localhost',database:'db',password:'5472',port:5432,});app.use(express.json());app.lisen(port,()=>{console.log(`Serverisrunningonport${port}`);});constdata={username:'example',password:'example'};fetch('api/login',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify(data),}).then((response)=>response.json()).then((data)=>{console.log('Success:',data);}).catch((error)=>{console.error('Error:',error);});
===== ./utils/register_avatar.js =====

===== ./utils/chatbox.js =====
functionchatbot(navigateTo,$player_name){document.addEventListener("DOMContentLoaded",function(){varchatLog=document.getElementById("chat-log");varmessageInput=document.getElementById("message-input");varsendButton=document.getElementById("send-button");sendButton.addEventListener("click",function(){sendMessage();});messageInput.addEventListener("keydown",function(event){if(event.key==="Enter"&&!event.shiftKey){event.preventDefault();sendMessage();}});messageInput.addEventListener("input",function(){adjustInputHeight();});messageInput.addEventListener("paste",function(event){event.preventDefault();varclipboardData=event.clipboardData||window.clipboardData;varpastedContent=clipboardData.getData("text/plain");varformattedContent=formatMessage(pastedContent);document.execCommand("insertHTML",false,formattedContent);});functionsendMessage(){varmessage=messageInput.value;if(message!==""){appendUserMessage(message);messageInput.value="";adjustInputHeight();//ShrinktheinputboxaftersendingsetTimeout(function(){varresponse="Hello!";appendBotMessage(response);},1000);}}functionappendUserMessage(message){vartimestamp=getCurrentTimestamp();varuserMessage=`<div><spanclass="timestamp">${timestamp}</span>[User]:${formatMessage(message)}</div>`;chatLog.innerHTML+=userMessage;scrollToBottom();}functionappendBotMessage(message){vartimestamp=getCurrentTimestamp();varbotMessage=`<div><spanclass="timestamp">${timestamp}</span>[ChatGPT]:${formatMessage(message)}</div>`;chatLog.innerHTML+=botMessage;scrollToBottom();}functionscrollToBottom(){chatLog.scrollTop=chatLog.scrollHeight;}functiongetCurrentTimestamp(){varnow=newDate();varhours=now.getHours().toString().padStart(2,"0");varminutes=now.getMinutes().toString().padStart(2,"0");return`${hours}:${minutes}`;}functionadjustInputHeight(){messageInput.style.height="auto";messageInput.style.height=messageInput.scrollHeight+"px";}functionformatMessage(message){//Checkifthemessagestartswithacodeblockindicatorif(message.startsWith("```")){return`<pre>${message}</pre>`;}//EscapeHTMLcharactersmessage=message.replace(/</g,"&lt;").replace(/>/g,"&gt;");//Formatcodeblocksenclosedinbackticksreturnmessage.replace(/(```[\s\S]*?```)/g,'<pre>$1</pre>');}});}
===== ./utils/unmask.js =====
functionchangeType(x,type){if(x.type===type){returnx;}try{return(x.type=type);//Attemptdirecttypechange}catch(e){varhtml=$("<div>").append(x.clone()).html();varregex=/type=(\")?([^\"\s]+)(\")?/;vartmp=$(html.match(regex)==null?html.replace(">",'type="'+type+'">')://Replaceentiretagifnotypeattributehtml.replace(regex,'type="'+type+'"'));//Replaceexistingtypeattributetmp.data('type',x.data('type'));varevents=x.data('events');varcb=function(events){returnfunction(){for(variinevents){vary=events[i];for(varjiny){tmp.bind(i,y[j].handler);}}};}(events);x.replaceWith(tmp);setTimeout(cb,10);returntmp;}}changeType.ready(function(){$('.unmask').on('click',function(){if($(this).prev('input').attr('type')==='password'){changeType($(this).prev('input'),'text');}else{changeType($(this).prev('input'),'password');}returnfalse;});});
===== ./views/profile.js =====
functionprofile(navigateTo,$player_name,profile_name){constwins=10;constlosses=5;constmostWinsAgainst='fab';constmostLossesAgainst='fab';consthighestAILevel=5;//constlast3MultiplayerGames='fab,fab,fab';//constlast3GamesAgainstUser='fab,fab,fab';document.getElementById('ft_transcendence').innerHTML=`<divclass="dashboard-container"><ulclass="navjustify-content-center"><aclass="navbar-brand"href="#"><imgsrc="content/logo2.png"alt="Logo"width="30"height="30"class="d-inline-blockalign-text-top"></a><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><h3id="header-dashboard"class="text-center">${profile_name}'sProfile</h3><divclass="text-center"id="profile-picture"><imgsrc="https://i.ibb.co/DVfTxB2/avatar5.png"class="img-thumbnailrounded-circled-flexjustify-content-center"alt="ProfilePicture"></div><buttontype="button"id="friendButton"class="btn-dark">AddFriend</button><divclass="card"id="login_card"><divclass="card-body"><h5class="card-title">Statistics</h5><pclass="card-text">Wins:${wins}<br>Losses:${losses}<br>Mostwinsagainst:${mostWinsAgainst}<br>Mostlossesagainst:${mostLossesAgainst}<br>HighestAIlevelbeaten:${highestAILevel}<br></p></div></div><liclass="breadcrumb-itemactive"id="arrowbackregister">Back</li><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer></div>`;attachEventHandlers2(navigateTo,$player_name,profile_name);}functionattachEventHandlers2(navigateTo,$player_name,profile_name){document.getElementById('arrowbackregister').addEventListener('click',function(event){event.preventDefault();navigateTo('dashboard',$player_name);});//Initializefriendshipstatus(replacewithyourownlogic)letisFriend=false;letrequestSent=false;//GetthebuttonelementconstfriendButton=document.getElementById('friendButton');//UpdatethebuttontextandstylebasedonthefriendshipstatusfunctionupdateFriendButton(){if(isFriend){friendButton.innerText='AlreadyFriends';friendButton.classList.remove('btn-dark');friendButton.classList.add('btn-darkdisabled');}elseif(requestSent){friendButton.innerText='RequestSent';friendButton.classList.remove('btn-dark');friendButton.classList.add('btn-darkdisabled');}else{friendButton.innerText='AddFriend';friendButton.classList.remove('btn-dark');friendButton.classList.add('btn-dark');}}//AddaneventlistenertothebuttonfriendButton.addEventListener('click',()=>{if(isFriend){//HandleunfriendinglogichereisFriend=false;}elseif(requestSent){//HandlecancelingthefriendrequestlogichererequestSent=false;}else{//HandlesendingafriendrequestlogichererequestSent=true;}updateFriendButton();});//CallthefunctiontoinitializethebuttontextandstyleupdateFriendButton();}
===== ./views/register.js =====
functionregister(navigateTo){document.getElementById('ft_transcendence').innerHTML=`<ulclass="navnavbar-expand-lgjustify-content-center"></ul><h1>Register</h1><liclass="breadcrumb-itemactive"id="arrowbackregister">Back</li><divclass="containerlogin-container"><formid="registerForm"><p><labelfor="username"style="margin-top:3%;">username</label><inputtype="text"value=""placeholder="EnterUsername"id="username"></p><p><labelfor="password">password</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="EnterPassword"id="password"class="password"><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><p><divclass="choose-avatar"><divid="carouselExampleControls"class="carouselslide"data-ride="carousel"data-interval="false"keyboard="true"><divclass="carousel-inner"><divclass="carousel-itemactive"><imgclass="d-blockw-100avatar-image"src="https://i.ibb.co/C2WLdyY/avatar1.png"alt="Firstslide"></div><divclass="carousel-item"><imgclass="d-blockw-100avatar-image"src="https://i.ibb.co/0t3JTMz/avatar2.png"alt="Secondslide"></div><divclass="carousel-item"><imgclass="d-blockw-100avatar-image"src="https://i.ibb.co/K08BjJx/avatar3.png"alt="Thirdslide"></div><aclass="carousel-control-prev"role="button"data-slide="prev"><spanclass="carousel-control-prev-icon"id="carousel-control-prev-icon"aria-hidden="true"></span><spanclass="sr-only">Previous</span></a><aclass="carousel-control-next"role="button"data-slide="next"><spanclass="carousel-control-next-icon"id="carousel-control-next-icon"aria-hidden="true"></span><spanclass="sr-only">Next</span></a></div></div></div></p><buttonid="registerbutton"type="submit"class="btnbtn-primarybtn-block">Register</button><buttonid="registerbutton42"type="button"class="btnbtn-primarybtn-block">Registerwith42</button></form></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;document.addEventListener('click',function(event){if(event.target.classList.contains('unmask')||event.target.closest('.unmask')){constbutton=event.target.closest('.unmask');//Targettheentirebuttonconstinput=button.previousElementSibling;if(input.type==='password'){input.type='text';button.querySelector('i').classList.remove('fa-lock');button.querySelector('i').classList.add('fa-lock-open');}else{input.type='password';button.querySelector('i').classList.remove('fa-lock-open');button.querySelector('i').classList.add('fa-lock');}}});document.getElementById('registerForm').addEventListener('submit',function(event){event.preventDefault();alert('Accountcreatedsuccessfully');navigateTo('login');});document.getElementById('arrowbackregister').addEventListener('click',function(event){event.preventDefault();navigateTo('login');});//carrouseldocument.getElementById('carousel-control-next-icon').addEventListener('click',function(event){event.preventDefault();$('#carouselExampleControls').carousel('next');});document.getElementById('carousel-control-prev-icon').addEventListener('click',function(event){event.preventDefault();$('#carouselExampleControls').carousel('prev');});}
===== ./views/login.js =====
functionlogin(navigateTo){document.getElementById('ft_transcendence').innerHTML=`<imgsrc="{%static'content/logo_400_400.png'%}"id="logo_pong_login"alt="Logo"width="320"height="320"style="margin-bot:10%;"><divid="loginAlert"class="alertalert-dangerd-none"role="alert">Invalidusernameorpassword!</div><divclass="containerlogin-container"><formid="loginForm"><p><labelfor="username"style="margin-top:3%;">username</label><inputtype="text"class="value=""placeholder="EnterUsername"id="username"></p><p><labelfor="password">password</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="EnterPassword"id="password"class="password"><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><buttontype="submit"class="btnbtn-primary">Login</button><divclass="text-center"><buttontype="button"id="create_account"class="btnbtn-outline-light">Createaccount</button></div></form></div><divclass="modalfade"id="errorModal"tabindex="-1"aria-labelledby="errorModalLabel"aria-hidden="true"><divclass="modal-dialog"><divclass="modal-content"><divclass="modal-header"><h5class="modal-title"id="errorModalLabel">LoginError</h5><buttontype="button"class="btn-close"data-bs-dismiss="modal"aria-label="Close"></button></div><divclass="modal-body">Invalidusernameorpassword</div><divclass="modal-footer"><buttontype="button"class="btnbtn-secondary"data-bs-dismiss="modal">Close</button></div></div></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventHandlers(navigateTo);}functionattachEventHandlers(navigateTo){/*navigatetodashboardpagewhenloginissuccessful*/document.getElementById('loginForm').addEventListener('submit',function(event){event.preventDefault();console.log('clicktologinbutton');constusername=document.getElementById('username').value;constpassword=document.getElementById('password').value;console.log('trytologinwithusername:',username,'andpassword:',password)fetch('api/login',{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify({username:username,password:password}),}).then((response)=>response.json()).then((data)=>{console.log('Success:',data);if(data.success){console.log('Loginsuccessful');navigateTo('dashboard',username);}else{constloginAlert=document.getElementById('loginAlert');loginAlert.classList.remove('d-none');}});});//if(username===''&&password===''){//console.log('Loginsuccessful');//navigateTo('dashboard',username);//}elseif(username==='fab'&&password==='fab'){//console.log('Loginsuccessful');//navigateTo('dashboard',username);//}else{//constloginAlert=document.getElementById('loginAlert');//loginAlert.classList.remove('d-none');//}//});/*navigatetocreateaccountpagewhencreateaccountisclicked*/constcreateButton=document.getElementById('create_account');if(createButton){createButton.addEventListener('click',function(event){event.preventDefault();console.log('clicktocreateaccountbutton');navigateTo('register');});}/*lockbutton*/document.addEventListener('click',function(event){if(event.target.classList.contains('unmask')||event.target.closest('.unmask')){constbutton=event.target.closest('.unmask');//Targettheentirebuttonconstinput=button.previousElementSibling;if(input.type==='password'){input.type='text';button.querySelector('i').classList.remove('fa-lock');button.querySelector('i').classList.add('fa-lock-open');}else{input.type='password';button.querySelector('i').classList.remove('fa-lock-open');button.querySelector('i').classList.add('fa-lock');}}});document.addEventListener("keydown",function(event){//ifenterkeyispressetandloginformiscompletethensubmittheformif(event.key==="Enter"){document.getElementById('loginForm').dispatchEvent(newEvent('submit'));}});}
===== ./views/dashboard.js =====
functiondashboard(navigateTo,$player_name){document.getElementById('ft_transcendence').innerHTML=`<divclass="dashboard-container"><ulclass="navjustify-content-center"><aclass="navbar-brand"href"#"><imgsrc="content/logo2.png"alt="Logo"width="30"height="30"class="d-inline-blockalign-text-top"><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><h3id="header-dashboard"class="text-center">${$player_name}'sDashboard</h3><divclass="text-center"id=profile-picture><imgsrc="https://i.ibb.co/FDg3t8m/avatar7.png"class="img-thumbnailrounded-circled-flexjustify-content-center"alt="ProfilePicture"></div><divclass="container-fluid"><divclass="row"><divclass="col-md-3sidebar"style="margin-left:inherit;"><ulid="friends"class="list-group"><liclass="list-group-item"data-friend="Friend1">Friend1</li><liclass="list-group-item"data-friend="Friend2">Friend2</li><liclass="list-group-item"data-friend="Friend3">Friend3</li></ul><divid="friendDropdown"class="dropdown-menu"style="display:none;"><aclass="dropdown-item"href="#"id="sendMessage">SendPrivateMessage</a><aclass="dropdown-item"href="#"id="startGame">StartaGame</a><aclass="dropdown-item"href="#"id="viewProfile">ViewProfile</a></div><divid="friendDropdown_chat"class="dropdown-menu_chat"style="display:none;"><aclass="dropdown-item"href="#"id="sendMessage">SendPrivateMessage</a><aclass="dropdown-item"href="#"id="addToFriend">AddToFriend</a><aclass="dropdown-item"href="#"id="blockUser">BlockUser</a><aclass="dropdown-item"href="#"id="viewProfile">ViewProfile</a></div><divclass="offcanvasoffcanvas-end"data-bs-scroll="true"tabindex="-1"id="chatbox"aria-labelledby="chatboxLabel"><divclass="offcanvas-header"><h5class="offcanvas-title"id="chatboxLabel">PrivateMessage</h5><buttontype="button"class="btn-close"data-bs-dismiss="offcanvas"aria-label="Close"></button></div><divclass="offcanvas-body"><divclass="chat-container2"><divclass="chat-log2"id="chat-log2"></div><divclass="input-container2"><textareaid="message-input2"placeholder="Typeyourmessage..."rows="1"></textarea><buttonid="send-button2">Send</button></div></div></div></div></div><divclass="col-md-9main-content"><divclass="card"><divclass="card-body"><h5class="card-title">${$player_name}</h5><pclass="card-text">Hereiputdatafromthegame;gamewin;gamelose;niveaudel'ialapluselevegagne;etcc${$player_name}</p></div></div><divclass="card"><divclass="card-body"><divclass="btn-group"id="play_button""role="group"aria-label="Basicexample"><buttontype="button"id="game_alone"class="btnbtn-primary">Play</button><buttontype="button"id="game_friend"class="btnbtn-primary">Playwithfriend</button><buttontype="button"id="game_tournament"class="btnbtn-primary">Playtournament</button></div></div></div><divclass="card"><divclass="chat-container"><divclass="chat-log"id="chat-log"></div><divclass="input-container"><textareaid="message-input"placeholder="Typeyourmessage..."rows="1"></textarea><buttonid="send-button">Send</button></div></div></div></div></div></div><divclass="toast-containerposition-fixedbottom-0end-0p-3"><divid="addFriendToast"class="toast"role="alert"aria-live="assertive"aria-atomic="true"><divclass="toast-header"><strongclass="me-auto">FriendRequest</strong><buttontype="button"class="btn-close"data-bs-dismiss="toast"aria-label="Close"></button></div><divclass="toast-body">Friendrequestsentsuccessfully!</div></div></div><divclass="toast-containerposition-fixedbottom-0end-0p-3"><divid="blockUserToast"class="toast"role="alert"aria-live="assertive"aria-atomic="true"><divclass="toast-header"><strongclass="me-auto">BlockUser</strong><buttontype="button"class="btn-close"data-bs-dismiss="toast"aria-label="Close"></button></div><divclass="toast-body">Userblockedsuccessfully!</div></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer></div>`;attachEventHandlers3(navigateTo,$player_name);}functionattachEventHandlers3(navigateTo,$player_name){//Navigatetologinpagewhenlogoutisclickeddocument.getElementById('logoutLink').addEventListener('click',function(event){event.preventDefault();console.log('Logoutsuccessful');navigateTo('login');});document.getElementById('game_alone').addEventListener('click',function(event){event.preventDefault();console.log('Playgame_alonebuttonclicked');navigateTo('gameplay',$player_name);});document.getElementById('game_friend').addEventListener('click',function(event){event.preventDefault();console.log('Playgame_friendbuttonclicked');navigateTo('gameplay_friends',$player_name);});//friendmenudocument.querySelectorAll('#friends.list-group-item').forEach(item=>{item.addEventListener('click',function(event){event.stopPropagation();constdropdown=document.getElementById('friendDropdown');constfriendName=this.getAttribute('data-friend');//HideallvisibledropdownsconstvisibleDropdowns=document.querySelectorAll('.dropdown-menu,.dropdown-menu_chat');visibleDropdowns.forEach(dropdown=>{dropdown.style.display='none';});//Positionthedropdownneartheclickedfrienditemdropdown.style.top=`${event.clientY}px`;dropdown.style.left=`${event.clientX}px`;dropdown.style.display='block';//Storetheclickedfriend'snamedropdown.setAttribute('data-friend',friendName);});});//Hidethedropdownmenuwhenclickingoutsideofitdocument.addEventListener('click',function(){constdropdown=document.getElementById('friendDropdown');if(dropdown){dropdown.style.display='none';}constdropdown2=document.getElementById('friendDropdown_chat');if(dropdown2){dropdown2.style.display='none';}});//Preventthedropdownmenufromclosingwhenclickinginsideitdocument.getElementById('friendDropdown').addEventListener('click',function(event){event.stopPropagation();});document.getElementById('friendDropdown_chat').addEventListener('click',function(event){event.stopPropagation();});//Eventhandlersfordropdownmenuactionsdocument.getElementById('sendMessage').addEventListener('click',function(event){event.preventDefault();varchatbox=newbootstrap.Offcanvas(document.getElementById('chatbox'));if(!chatbox){console.log('chatboxisnull');}chatbox.show();});document.getElementById('friendDropdown_chat').querySelector('#sendMessage').addEventListener('click',function(event){event.preventDefault();varchatbox=newbootstrap.Offcanvas(document.getElementById('chatbox'));if(!chatbox){console.log('chatboxisnull');}chatbox.show();});document.getElementById('startGame').addEventListener('click',function(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Startagamewith${friendName}`);gameplay(navigateTo,$player_name);});//Chatglobaldocument.getElementById('send-button').addEventListener('click',function(event){event.preventDefault();constmessageInput=document.getElementById('message-input');if(messageInput.value.trim()!==''){constmessage=formatMessage(messageInput.value,$player_name);constchatLog=document.getElementById('chat-log');constmessageElement=document.createElement('div');//CreatetheusernameelementandsetitsattributesconstusernameElement=document.createElement('a');usernameElement.href='#';usernameElement.classList.add('username-link');usernameElement.dataset.friend=$player_name;usernameElement.innerText=`[${$player_name}]`;//activethedropdownmenuwhenusernameisclickedusernameElement.addEventListener('click',function(event){event.stopPropagation();constdropdown=document.getElementById('friendDropdown_chat');constfriendName=this.getAttribute('data-friend');constrect=this.getBoundingClientRect();//HideallvisibledropdownsconstvisibleDropdowns=document.querySelectorAll('.dropdown-menu,.dropdown-menu_chat');visibleDropdowns.forEach(dropdown=>{dropdown.style.display='none';});//Positionthedropdownneartheclickedfrienditemdropdown.style.top=`${event.clientY}px`;//clickpositiondropdown.style.left=`${event.clientX}px`;dropdown.style.display='block';//Storetheclickedfriend'snamedropdown.setAttribute('data-friend',friendName);});//CreatethemessageelementandsetitstextconstmessageTextElement=document.createElement('span');messageTextElement.innerText=`:${messageInput.value}`;//AppendtheusernameandmessageelementstothemessageelementmessageElement.appendChild(usernameElement);messageElement.appendChild(messageTextElement);chatLog.appendChild(messageElement);messageInput.value='';scrollToBottom();}});//privatemessagewithfrienddocument.getElementById('send-button2').addEventListener('click',function(event){event.preventDefault();constmessageInput2=document.getElementById('message-input2');if(messageInput2.value.trim()!==''){constmessage=formatMessage(messageInput2.value,$player_name);constchatLog2=document.getElementById('chat-log2');constmessageElement=document.createElement('div');messageElement.innerText=message;chatLog2.appendChild(messageElement);messageInput2.value='';scrollToBottom2();}});//SendmessagewhenpressingEnterkeydocument.addEventListener("keydown",function(event){if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();document.getElementById('send-button').click();}});document.addEventListener("keydown",function(event){if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();document.getElementById('send-button2').click();}});//toastwhenaddfrienddocument.getElementById('friendDropdown_chat').querySelector('#addToFriend').addEventListener('click',function(event){event.preventDefault();vartoast=newbootstrap.Toast(document.getElementById('addFriendToast'));toast.show();});//toastwhenblockuserdocument.getElementById('friendDropdown_chat').querySelector('#blockUser').addEventListener('click',function(event){event.preventDefault();vartoast=newbootstrap.Toast(document.getElementById('blockUserToast'));toast.show();});//navigateToprofilepagewhenviewprofileisclickeddocument.getElementById('friendDropdown').querySelector('#viewProfile').addEventListener('click',function(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Viewprofileof${friendName}`);navigateTo('profile',$player_name,friendName);});document.getElementById('friendDropdown_chat').querySelector('#viewProfile').addEventListener('click',function(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Viewprofileof${friendName}`);navigateTo('profile',$player_name,friendName);});}functionscrollToBottom(){constchatLog=document.getElementById('chat-log');chatLog.scrollTop=chatLog.scrollHeight;}functionscrollToBottom2(){constchatLog2=document.getElementById('chat-log2');chatLog2.scrollTop=chatLog2.scrollHeight;}functionformatUsername(username){return`<ahref="#"class="username-link"data-friend="${username}">${username}</a>`;}functionformatMessage(message,playerName){/*fornohtmlinjection*/if(message.startsWith("```")){return`<pre>${message}</pre>`;}/*syntax:[player_name]:message*/message=message.replace(/</g,"&lt;").replace(/>/g,"&gt;");message=message.replace(/(```[\s\S]*?```)/g,'<pre>$1</pre>');return`${message}`;}//AdjusttheheightoftheinputfieldbasedonitscontentfunctionadjustInputHeight(){messageInput.style.height='auto';messageInput.style.height=`${messageInput.scrollHeight}px`;}
===== ./views/gameplay.js =====
functiongameplay(navigateTo,$player_name){document.getElementById('ft_transcendence').innerHTML=`<ulclass="navnavbar-expand-lgjustify-content-center"><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><divclass="containergame-container"><divclass="game-area"><!--Yourgamelogichere(canvas,etc.)--></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventHandlers2(navigateTo,$player_name);}functionattachEventHandlers2(navigateTo,$player_name){//Navigatetodashboardisexitisclickeddocument.querySelector('.btn-danger').addEventListener('click',function(event){event.preventDefault();console.log('Exitbuttonclicked');navigateTo('dashboard',$player_name);});}
===== ./views/gameplay_friends.js =====
functiongameplay_friends(navigateTo,$player_name){document.getElementById('ft_transcendence').innerHTML=`<ulclass="navnavbar-expand-lgjustify-content-center"><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><divclass="containergame-container"><divclass="game-area"><!--Yourgamelogichere(canvas,etc.)--></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventHandlers11(navigateTo,$player_name);}functionattachEventHandlers11(navigateTo,$player_name){//Navigatetodashboardisexitisclickeddocument.querySelector('.btn-danger').addEventListener('click',function(event){event.preventDefault();console.log('Exitbuttonclicked');navigateTo('dashboard',$player_name);});}
===== ./app.js =====
document.addEventListener('DOMContentLoaded',function(){functionnavigateTo(viewId,...args){console.log('Navigatingto',viewId);hideCurrentView();showView(viewId,...args);}functionhideCurrentView(){constactiveView=document.querySelector('.active-view');if(activeView){activeView.classList.remove('active-view');activeView.style.display='none';}}constviewActions={register:(navigateTo)=>register(navigateTo),login:(navigateTo)=>login(navigateTo),dashboard:(navigateTo,...args)=>dashboard(navigateTo,...args),gameplay:(navigateTo,...args)=>gameplay(navigateTo,...args),gameplay_friends:(navigateTo,...args)=>gameplay_friends(navigateTo,...args),profile:(navigateTo,playerName)=>profile(navigateTo,playerName),};functionshowView(viewId,...args){constview=document.getElementById(viewId);if(view){view.classList.add('active-view');view.style.display='block';}elseif(viewActions[viewId]){viewActions[viewId](navigateTo,...args);}else{console.error(`ViewwithID"${viewId}"notfound`);}}//InitialviewdisplayconstinitialViewId='login';//DefaultviewtoshowoninitialloadshowView(initialViewId);document.addEventListener('click',function(event){if(event.target.matches('[data-link]')){event.preventDefault();constlink=event.target.getAttribute('data-link');navigateTo(link);}});});
