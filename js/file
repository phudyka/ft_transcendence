===== ../index.html =====
<!DOCTYPEhtml><htmllang="en"><head><linkrel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"><linkrel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"><style>@importurl('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');</style><metacharset="UTF-8"><metaname="viewport"content="width=device-width,initial-scale=1.0"><title>ft_transcendence</title><linkrel="stylesheet"href="node_modules/bootstrap/dist/css/bootstrap.min.css"><linkrel="stylesheet"href="css/styles.css"><linkrel="stylesheet"href="css/avatar.css"></head><body><divid="ft_transcendence"></div><!--<scriptsrc="https://code.jquery.com/jquery-3.6.3.min.js"></script>--><scriptsrc="node_modules/@popperjs/core/dist/umd/popper.min.js"></script><scriptsrc="node_modules/bootstrap/dist/js/bootstrap.min.js"></script><scriptsrc="js/app.js"></script><scriptsrc="js/views/login.js"></script><scriptsrc="js/views/register.js"></script><scriptsrc="js/views/dashboard.js"></script><scriptsrc="js/views/chat.js"></script><scriptsrc="js/views/gameplay_friends.js"></script><scriptsrc="js/views/gameplay.js"></script><scriptsrc="js/utils/unmask.js"></script><scriptsrc="js/utils/register_avatar.js"></script></body></html>
===== ../css/styles.css =====
html,body{height:100%;margin:0;background-color:#e3d6c1;}body{display:flex;flex-direction:column;justify-content:space-between;/*footerenbas*/align-items:center;}#ft_transcendence{height:100%;width:100%;}.dashboard-container{display:flex;flex-direction:column;flex:1;/*Permetàcetélémentdeprendretoutl'espacedisponible*/width:95%;margin:0;padding:0;}#logo_pong_login{display:block;margin:0auto;}/*otherexistingstyles*/.login-register-page{display:flex;justify-content:center;align-items:center;height:90vh;margin:0;}.view{display:none;padding:20px;}.active-view{display:block;}h1{text-align:center;/*margin-bottom:7%;*/margin-top:2%;font-weight:900;/*margin-bottom:220px;*/}.login-containerh1{display:flex;justify-content:center;align-items:center;max-width:150%;max-height:150%;}.container{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;padding:50px;background-color:#307f3d;border-radius:30px;box-shadow:0px0px10px0pxrgba(0,0,0,0.1);border:5pxsolidblack;}form{width:100%;}p{margin-bottom:20px;}label{display:block;text-align:center;margin-bottom:5px;width:100%;font-weight:900;box-sizing:border-box;}input[type="text"],input[type="password"]{width:calc(100%);padding:10px;margin-bottom:10px;border:1pxsolid#ccc;background-color:#307f3d;border-radius:30px;border:1pxsolidblack;}.unmask{margin-top:10px;padding:10px;background-color:#fff;border:1pxsolid#ccc;border-radius:5px;cursor:pointer;}.btn{width:100%;padding:10px;background-color:#307f3d;border:none;border-radius:30px;color:#ffffff;font-size:16px;}.img-thumbnail{width:100%;height:100%;}/*button*/.btn-primary{background-color:#307f3d;border:3pxsolidblack;}.btn-primary:hover{background-color:#e3d6c1;border:3pxsolidblack;}.btn-danger{background-color:red;border:3pxsolidblack;}.btn-block{display:block;width:100%;}input::placeholder{color:#e3d6c1;}/*forpasswordvisibilitytoggle*/.password-wrapper{position:relative;display:flex;align-items:center;width:100%;}.password-wrapperinput[type="text"],.password-wrapperinput[type="password"]{width:calc(100%-40px);width:100%;padding-right:40px;box-sizing:border-box;}.password-wrapper.unmask{position:absolute;right:10px;top:-15%;background:none;border:none;cursor:pointer;color:black;}.navbar{color:#307f3d;/*mettreenhautdelapage*/position:fixed;/*top:0;width:100%;z-index:1000;*/}.container-fluid{padding-left:0;padding-right:0;width:100%;}@media(max-width:768px){.user-info{width:100%;padding:20px;}}#registerbutton,#registerbutton42{margin-bottom:10px;}#profile-picture{display:flex;justify-content:center;align-items:center;margin-bottom:50px;margin-top:30px;margin-left:auto;margin-right:auto;border-radius:100px;border:3pxsolidblack;}.img-thumbnail{width:200px;height:200px;/*object-fit:cover;*/border-radius:50%;padding:0;}#start_button{margin-top:10px;margin-bottom:10px;}#loginAlert{/*display:none;*//*margin-left:300px;margin-right:300px;margin-bottom:150px;*/margin-left:6%;margin-right:6%;border-radius:30px;text-align:center;border:2pxsolidblack;background-color:#d93d35;border:2pxsolidblack;/*needtextinboldandwhite*/color:white;font-weight:900;}#title_dashboard{display:flex;justify-content:center;margin-left:auto;margin-right:auto;}#play_button{display:flex;}/*footer*/footer{text-align:center;width:100%;}#friends{display:flex;/*justify-content:center;*//*align-items:center;*/margin-left:5%;}/*liltleimagepictureforchosepponregisterpage*/#chose_pp{display:flex;justify-content:center;align-items:center;/*width:auto;height:auto;*//*width:20px;*//*height:15px;*/}.game-container{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:2%;/*margin-bottom:50px;*/min-width:85%;min-height:85%;height:auto;width:auto;}#header-dashboard{display:flex;justify-content:center;align-items:center;flex-direction:column;margin-top:10px;margin-bottom:10px;/*margin-top:50px;*//*margin-bottom:50px;*/}.dropdown-menu{display:none;position:absolute;border:2pxsolidblack;background-color:#307f3d;z-index:1000;}.dropdown-menu::shadow{display:block;background-color:#e3d6c1;}
===== ./server.js =====
constexpress=require('express');const{Pool}=require('pg');constapp=express();constport=8000;constpool=newPool({user:'fab',host:'db',database:'ft_transcendence',password:'pass',port:5432,});app.use(express.json());
===== ./utils/register_avatar.js =====
document.addEventListener('DOMContentLoaded',()=>{constprev=document.getElementById('left_click')constnext=document.getElementById('right_click')constcontainer=document.getElementById('avatars')constavatars=document.querySelectorAll('.avatars-container>.avatar-item')letcurrentIndex=Math.floor(avatars.length/2)constval=(avatars.length-1-Math.floor(avatars.length/2))*195lettranslateVal=0for(leti=0;i<avatars.length;i++){if(i===Math.floor(avatars.length/2)){avatars[i].classList.add('current')}}letdefaultVal=0if(avatars.length%2===0){defaultVal=90translateVal-=90container.style.transform=`translateX(${translateVal}px)`}prev.addEventListener('click',()=>{console.log("prevclicked")if(currentIndex-1<0){avatars[currentIndex].classList.remove('current')avatars[avatars.length-1].classList.add('current')currentIndex=avatars.length-1translateVal=-val-defaultValcontainer.style.transform=`translateX(${translateVal}px)`}else{avatars[currentIndex].classList.remove('current')avatars[currentIndex-1].classList.add('current')currentIndex-=1translateVal+=195container.style.transform=`translateX(${translateVal}px)`}})next.addEventListener('click',()=>{if(currentIndex+1>=avatars.length){avatars[currentIndex].classList.remove('current')avatars[0].classList.add('current')currentIndex=0translateVal=val+defaultValcontainer.style.transform=`translateX(${translateVal}px)`return}avatars[currentIndex].classList.remove('current')avatars[currentIndex+1].classList.add('current')currentIndex+=1translateVal-=195container.style.transform=`translateX(${translateVal}px)`})})
===== ./utils/unmask.js =====
functionchangeType(x,type){if(x.type===type){returnx;}try{return(x.type=type);//Attemptdirecttypechange}catch(e){varhtml=$("<div>").append(x.clone()).html();varregex=/type=(\")?([^\"\s]+)(\")?/;vartmp=$(html.match(regex)==null?html.replace(">",'type="'+type+'">')://Replaceentiretagifnotypeattributehtml.replace(regex,'type="'+type+'"'));//Replaceexistingtypeattributetmp.data('type',x.data('type'));varevents=x.data('events');varcb=function(events){returnfunction(){for(variinevents){vary=events[i];for(varjiny){tmp.bind(i,y[j].handler);}}};}(events);x.replaceWith(tmp);setTimeout(cb,10);returntmp;}}changeType.ready(function(){$('.unmask').on('click',function(){if($(this).prev('input').attr('type')==='password'){changeType($(this).prev('input'),'text');}else{changeType($(this).prev('input'),'password');}returnfalse;});});
===== ./views/register.js =====
functionregister(navigateTo){document.getElementById('ft_transcendence').innerHTML=`<h1>Register</h1><divclass="containerlogin-container"><formid="registerForm"><p><labelfor="username">username</label><inputtype="text"value=""placeholder="EnterUsername"id="username"></p><p><labelfor="password">password</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="EnterPassword"id="password"class="password"><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><p><divclass="choose-avatar"><divclass="avatars-container"id="avatars-container"><spanclass="left"id="left_click"></span><divclass="avatars"id="avatars"><divclass="avatar-item"style="background-image:url('https://i.ibb.co/C2WLdyY/avatar1.png');"><spanid="text-avatar">Choose</span></div><divclass="avatar-item"style="background-image:url('https://i.ibb.co/0t3JTMz/avatar2.png');"><spanid="text-avatar">Choose</span></div><divclass="avatar-item"style="background-image:url('https://i.ibb.co/K08BjJx/avatar3.png');"><spanid="text-avatar">Choose</span></div><divclass="avatar-item"style="background-image:url('https://i.ibb.co/6XW1X2L/avatar4.png');"><spanid="text-avatar">Choose</span></div><divclass="avatar-item"style="background-image:url('https://i.ibb.co/DVfTxB2/avatar5.png');"><spanid="text-avatar">Choose</span></div><divclass="avatar-item"style="background-image:url('https://i.ibb.co/Bzvqgg3/avatar6.png');"><spanid="text-avatar">Choose</span></div><divclass="avatar-item"style="background-image:url('https://i.ibb.co/FDg3t8m/avatar7.png');"><spanid="text-avatar">Choose</span></div></div><spanclass="right"id="right_click"></span></div></div></p><buttonid="registerbutton"type="submit"class="btnbtn-primarybtn-block">Register</button><buttonid="registerbutton42"type="button"class="btnbtn-primarybtn-block">Registerwith42</button><buttonid="arrowbackregister"class="btnbtn-primary"><iclass="bibi-arrow-left"></i></button></form></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;document.addEventListener('click',function(event){if(event.target.classList.contains('unmask')||event.target.closest('.unmask')){constbutton=event.target.closest('.unmask');constinput=button.previousElementSibling;if(input.type==='password'){input.type='text';button.querySelector('i').classList.remove('fa-lock');button.querySelector('i').classList.add('fa-lock-open');}else{input.type='password';button.querySelector('i').classList.remove('fa-lock-open');button.querySelector('i').classList.add('fa-lock');}}});document.getElementById('registerForm').addEventListener('submit',function(event){event.preventDefault();//createaccountandaddtodatabasealert('Accountcreatedsuccessfully');navigateTo('login');});document.getElementById('arrowbackregister').addEventListener('click',function(event){event.preventDefault();navigateTo('login');});}
===== ./views/login.js =====
functionlogin(navigateTo){document.getElementById('ft_transcendence').innerHTML=`<h1>ft_pong</h1><imgsrc="content/logo_400_400.png"id="logo_pong_login"alt="Logo"/><divid="loginAlert"class="alertalert-dangerd-none"role="alert">Invalidusernameorpassword!</div><divclass="containerlogin-container"><formid="loginForm"><p><labelfor="username">username</label><inputtype="text"value=""placeholder="EnterUsername"id="username"></p><p><labelfor="password">password</label><divclass="password-wrapper"><inputtype="password"value=""placeholder="EnterPassword"id="password"class="password"><buttonclass="unmask"type="button"title="Mask/Unmaskpasswordtocheckcontent"><iclass="fasfa-lock"></i></button></div></p><buttontype="submit"class="btnbtn-primary">Login</button><divclass="text-center"><ahref=""data-link="register">createaccount</a></div></form></div><divclass="modalfade"id="errorModal"tabindex="-1"aria-labelledby="errorModalLabel"aria-hidden="true"><divclass="modal-dialog"><divclass="modal-content"><divclass="modal-header"><h5class="modal-title"id="errorModalLabel">LoginError</h5><buttontype="button"class="btn-close"data-bs-dismiss="modal"aria-label="Close"></button></div><divclass="modal-body">Invalidusernameorpassword</div><divclass="modal-footer"><buttontype="button"class="btnbtn-secondary"data-bs-dismiss="modal">Close</button></div></div></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventHandlers(navigateTo);}functionattachEventHandlers(navigateTo){/*navigatetodashboardpagewhenloginissuccessful*/document.getElementById('loginForm').addEventListener('submit',function(event){event.preventDefault();console.log('clicktologinbutton');constusername=document.getElementById('username').value;constpassword=document.getElementById('password').value;if(username===''&&password===''){console.log('Loginsuccessful');navigateTo('dashboard',username);}else{constloginAlert=document.getElementById('loginAlert');loginAlert.classList.remove('d-none');}});/*navigatetocreateaccountpagewhencreateaccountisclicked*/constcreateButton=document.getElementById('create');if(createButton){createButton.addEventListener('click',function(event){event.preventDefault();console.log('clicktocreateaccountbutton');navigateTo('register');});}/*lockbutton*/document.addEventListener('click',function(event){if(event.target.classList.contains('unmask')||event.target.closest('.unmask')){constbutton=event.target.closest('.unmask');//Targettheentirebuttonconstinput=button.previousElementSibling;if(input.type==='password'){input.type='text';button.querySelector('i').classList.remove('fa-lock');button.querySelector('i').classList.add('fa-lock-open');}else{input.type='password';button.querySelector('i').classList.remove('fa-lock-open');button.querySelector('i').classList.add('fa-lock');}}});}
===== ./views/chat.js =====
functionchat(navigateTo,$player_name,friend_name){document.getElementById('ft_transcendence').innerHTML=`<divclass="container-fluidchat-container"><divclass="row"><divclass="col-md-3sidebar"><h4id="title_dashboard">Friends</h4><ulid="friends"class="list-group"><liclass="list-group-item"data-friend="Friend1">Friend1</li><liclass="list-group-item"data-friend="Friend2">Friend2</li><liclass="list-group-item"data-friend="Friend3">Friend3</li></ul><divid="friendDropdown"class="dropdown-menu"style="display:none;"><aclass="dropdown-item"href="#"id="sendMessage">SendPrivateMessage</a><aclass="dropdown-item"href="#"id="startGame">StartaGame</a></div></div><divclass="col-md-9chat-window"><divclass="messages"><divclass="message"><strong>Friend1:</strong>Hello!</div><divclass="message"><strong>You:</strong>Hithere!</div></div><divclass="message-input"><inputtype="text"class="form-control"placeholder="Typeamessage..."><buttonclass="btnbtn-primary">Send</button></div><buttonid="backToDashboard"class="btnbtn-primary">BacktoDashboard</button></div></div></div>`;attachEventHandlers5(navigateTo);}functionattachEventHandlers5(navigateTo){//NavigatetodashboardisbackToDashboardisclickeddocument.getElementById('backToDashboard').addEventListener('click',function(event){event.preventDefault();console.log('Backtodashboard');navigateTo('dashboard');});}
===== ./views/dashboard.js =====
functiondashboard(navigateTo,$player_name){document.getElementById('ft_transcendence').innerHTML=`<divclass="dashboard-container"><ulclass="navjustify-content-center"><aclass="navbar-brand"href"#"><imgsrc="content/logo2.png"alt="Logo"width="30"height="30"class="d-inline-blockalign-text-top"><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><h3id="header-dashboard"class="text-center">${$player_name}'sDashboard</h3><divclass="text-center"id=profile-picture><imgsrc="https://i.ibb.co/C2WLdyY/avatar1.png"class="img-thumbnailrounded-circled-flexjustify-content-center"alt="ProfilePicture"></div><divclass="container-fluid"><divclass="row"><divclass="col-md-3sidebar"><ulid="friends"class="list-group"><liclass="list-group-item"data-friend="Friend1">Friend1</li><liclass="list-group-item"data-friend="Friend2">Friend2</li><liclass="list-group-item"data-friend="Friend3">Friend3</li></ul><divid="friendDropdown"class="dropdown-menu"style="display:none;"><aclass="dropdown-item"href="#"id="sendMessage">SendPrivateMessage</a><aclass="dropdown-item"href="#"id="startGame">StartaGame</a></div></div><divclass="col-md-9main-content"><divclass="card"><divclass="card-body"><h5class="card-title">${$player_name}</h5><pclass="card-text">Hereiputdatafromthegame;gamewin;gamelose;niveaudel'ialapluselevegagne;etcc${$player_name}</p></div></div><divclass="card"><divclass="card-body"><divclass="btn-group"id="play_button""role="group"aria-label="Basicexample"><buttontype="button"id="game_alone"class="btnbtn-primary">Play</button><buttontype="button"id="game_friend"class="btnbtn-primary">Playwithfriend</button><buttontype="button"id="game_tournament"class="btnbtn-primary">Playtournament</button></div></div></div><divclass="card"><divclass="card-body"><h5class="card-title">GlobalTchat</h5><ulclass="list-group"><liclass="list-group-item">Player1</li><liclass="list-group-item">Player2</li><liclass="list-group-item">Player3</li></ul></div></div></div></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer></div>`;attachEventHandlers3(navigateTo,$player_name);}functionattachEventHandlers3(navigateTo,$player_name){//Navigatetologinpagewhenlogoutisclickeddocument.getElementById('logoutLink').addEventListener('click',function(event){event.preventDefault();console.log('Logoutsuccessful');navigateTo('login');});document.getElementById('game_alone').addEventListener('click',function(event){event.preventDefault();console.log('Playgame_alonebuttonclicked');navigateTo('gameplay',$player_name);});document.getElementById('game_friend').addEventListener('click',function(event){event.preventDefault();console.log('Playgame_friendbuttonclicked');navigateTo('gameplay_friends',$player_name);});//friendmenudocument.querySelectorAll('#friends.list-group-item').forEach(item=>{item.addEventListener('click',function(event){event.stopPropagation();constdropdown=document.getElementById('friendDropdown');constfriendName=this.getAttribute('data-friend');constrect=this.getBoundingClientRect();//Positionthedropdownneartheclickedfrienditemdropdown.style.top=`${rect.bottom}px`;dropdown.style.left=`${rect.left}px`;dropdown.style.display='block';//Storetheclickedfriend'snamedropdown.setAttribute('data-friend',friendName);});});//Hidethedropdownmenuwhenclickingoutsideofitdocument.addEventListener('click',function(){constdropdown=document.getElementById('friendDropdown');if(dropdown){dropdown.style.display='none';}});//Preventthedropdownmenufromclosingwhenclickinginsideitdocument.getElementById('friendDropdown').addEventListener('click',function(event){event.stopPropagation();});//Eventhandlersfordropdownmenuactionsdocument.getElementById('sendMessage').addEventListener('click',function(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Sendmessageto${friendName}`);chat(navigateTo,$player_name,friendName);});document.getElementById('startGame').addEventListener('click',function(event){event.preventDefault();constfriendName=document.getElementById('friendDropdown').getAttribute('data-friend');console.log(`Startagamewith${friendName}`);gameplay(navigateTo,$player_name);});}
===== ./views/gameplay.js =====
functiongameplay(navigateTo,$player_name){document.getElementById('ft_transcendence').innerHTML=`<ulclass="navnavbar-expand-lgjustify-content-center"><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><divclass="containergame-container"><divclass="game-area"><!--Yourgamelogichere(canvas,etc.)--></div><divclass="game-info"><h4>Score:1000</h4><h5>Level:2</h5></div><divclass="controlsmt-3"><buttonclass="btnbtn-primary">Pause</button><buttonclass="btnbtn-danger">Exit</button></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventHandlers2(navigateTo,$player_name);}functionattachEventHandlers2(navigateTo,$player_name){//Navigatetodashboardisexitisclickeddocument.querySelector('.btn-danger').addEventListener('click',function(event){event.preventDefault();console.log('Exitbuttonclicked');navigateTo('dashboard',$player_name);});}
===== ./views/gameplay_friends.js =====
functiongameplay_friends(navigateTo,$player_name){document.getElementById('ft_transcendence').innerHTML=`<ulclass="navnavbar-expand-lgjustify-content-center"><aclass="nav-linkdisabled">pongonline</a><aclass="nav-linkdisabled">${$player_name}</a><aclass="nav-link"href=""id="logoutLink">Logout</a></ul><divclass="containergame-container"><divclass="game-area"><!--Yourgamelogichere(canvas,etc.)--></div></div><footerclass="py-3my-4"><pclass="text-centertext-body-secondary">©202442Company,Inc</p></footer>`;attachEventHandlers11(navigateTo,$player_name);}functionattachEventHandlers11(navigateTo,$player_name){//Navigatetodashboardisexitisclickeddocument.querySelector('.btn-danger').addEventListener('click',function(event){event.preventDefault();console.log('Exitbuttonclicked');navigateTo('dashboard',$player_name);});}
===== ./app.js =====
document.addEventListener('DOMContentLoaded',function(){functionnavigateTo(viewId,...args){console.log('Navigatingto',viewId);hideCurrentView();showView(viewId,...args);}functionhideCurrentView(){constactiveView=document.querySelector('.active-view');if(activeView){activeView.classList.remove('active-view');activeView.style.display='none';}}constviewActions={register:(navigateTo)=>register(navigateTo),login:(navigateTo)=>login(navigateTo),dashboard:(navigateTo,...args)=>dashboard(navigateTo,...args),gameplay:(navigateTo,...args)=>gameplay(navigateTo,...args),gameplay_friends:(navigateTo,...args)=>gameplay_friends(navigateTo,...args),chat:(navigateTo,playerName,friendName)=>chat(navigateTo,playerName,friendName)};functionshowView(viewId,...args){constview=document.getElementById(viewId);if(view){view.classList.add('active-view');view.style.display='block';}elseif(viewActions[viewId]){viewActions[viewId](navigateTo,...args);}else{console.error(`ViewwithID"${viewId}"notfound`);}}//InitialviewdisplayconstinitialViewId='login';//DefaultviewtoshowoninitialloadshowView(initialViewId);document.addEventListener('click',function(event){if(event.target.matches('[data-link]')){event.preventDefault();constlink=event.target.getAttribute('data-link');navigateTo(link);}});});
